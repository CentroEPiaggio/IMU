C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 1   


C51 COMPILER V9.51, COMPILATION OF MODULE COMMAND_PROCESSING
OBJECT MODULE PLACED IN .\DP8051_Keil_951\Release\command_processing.obj
COMPILER INVOKED BY: C:\Program Files (x86)\Cypress\PSoC Creator\4.1\PSoC Creator\import\keil\pk51\9.51\C51\BIN\c51.exe 
                    -command_processing.c NOIV LARGE MODDP2 OMF2 VB(1) NOIP INCDIR(.,Generated_Source\PSoC3) FF(3) DB DF(NDEBUG) WL(2) PR(.\D
                    -P8051_Keil_951\Release/command_processing.lst) CD OT(11,SPEED) OJ(.\DP8051_Keil_951\Release\command_processing.obj)

line level    source

*** MESSAGE C286 IN LINE 0 OF (null): license limits optimization to level 5
   1          // ----------------------------------------------------------------------------
   2          // Copyright (C)  qbrobotics. All rights reserved.
   3          // www.qbrobotics.com
   4          // ----------------------------------------------------------------------------
   5          
   6          
   7          /**
   8          * \file         command_processing.c
   9          *
  10          
  11          * \brief        Command processing functions.
  12          * \date         May 16, 2016
  13          * \author       qbrobotics
  14          * \copyright    (C)  qbrobotics. All rights reserved.
  15          */
  16          
  17          //=================================================================     includes
  18          #include <command_processing.h>
  19          #include <interruptions.h>
  20          #include <stdio.h>
  21          #include <utils.h>
  22          #include <IMU_functions.h>
  23          #include <globals.h>
  24          
  25          #include "commands.h"
  26          
  27          //================================================================     variables
  28          
  29          reg8 * EEPROM_ADDR = (reg8 *) CYDEV_EE_BASE;
  30          
  31          //==============================================================================
  32          //                                                            RX DATA PROCESSING
  33          //==============================================================================
  34          //  This function checks for the availability of a data packet and process it:
  35          //      - Verify checksum;
  36          //      - Process commands;
  37          //==============================================================================
  38          
  39          void commProcess(){
  40   1      
  41   1          uint8 CYDATA rx_cmd;
  42   1      
  43   1          rx_cmd = g_rx.buffer[0];
  44   1      
  45   1      //==========================================================     verify checksum
  46   1      
  47   1          if (!(LCRChecksum(g_rx.buffer, g_rx.length - 1) == g_rx.buffer[g_rx.length - 1])){
  48   2              // Wrong checksum
  49   2              g_rx.ready = 0;
  50   2              return;
  51   2          }
  52   1      
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 2   

  53   1      
  54   1          switch(rx_cmd) {
  55   2      
  56   2      //=============================================================     CMD_ACTIVATE
  57   2              case CMD_ACTIVATE:
  58   2                  cmd_activate();
  59   2                  break;
  60   2      
  61   2      //===========================================================     CMD_SET_INPUTS
  62   2      
  63   2              case CMD_SET_INPUTS:
  64   2                  cmd_set_inputs();
  65   2                  break;
  66   2      
  67   2      //=====================================================     CMD_GET_MEASUREMENTS
  68   2      
  69   2              case CMD_GET_MEASUREMENTS:
  70   2                  cmd_get_measurements();
  71   2                  break;
  72   2      
  73   2      //=========================================================     CMD_GET_CURRENTS
  74   2      
  75   2              case CMD_GET_CURRENTS:
  76   2                  cmd_get_currents();
  77   2                  break;
  78   2      
  79   2      
  80   2      //=========================================================     CMD_GET_EMG
  81   2      
  82   2              case CMD_GET_EMG:
  83   2                  cmd_get_emg();
  84   2                  break;
  85   2      
  86   2      //=============================================================     CMD_WATCHDOG
  87   2                  
  88   2              case CMD_SET_WATCHDOG:
  89   2                  cmd_set_watchdog();
  90   2                  break;
  91   2                  
  92   2      //=========================================================     CMD_GET_ACTIVATE
  93   2                  
  94   2              case CMD_GET_ACTIVATE:
  95   2                  cmd_get_activate();
  96   2                  break;
  97   2                  
  98   2      //=========================================================     CMD_SET_BAUDRATE
  99   2                  
 100   2              case CMD_SET_BAUDRATE:
 101   2                  cmd_set_baudrate();
 102   2                  break;  
 103   2                  
 104   2      //============================================================     CMD_GET_INPUT
 105   2      
 106   2              case CMD_GET_INPUTS:
 107   2                  cmd_get_inputs();
 108   2                  break;
 109   2      
 110   2      //=============================================================     CMD_GET_INFO
 111   2      
 112   2              case CMD_GET_INFO:
 113   2                  infoGet( *((uint16 *) &g_rx.buffer[1]));
 114   2                  break;
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 3   

 115   2      
 116   2      //============================================================     CMD_SET_PARAM
 117   2                  
 118   2              case CMD_SET_ZEROS:
 119   2                  setZeros();
 120   2                  break;
 121   2      
 122   2      //============================================================     CMD_GET_PARAM
 123   2                  
 124   2              case CMD_GET_PARAM_LIST:
 125   2                  get_param_list( *((uint16 *) &g_rx.buffer[1]));
 126   2                  break;
 127   2      
 128   2      //=================================================================     CMD_PING
 129   2                  
 130   2              case CMD_PING:
 131   2                  cmd_ping();
 132   2                  break;
 133   2      
 134   2      //=========================================================     CMD_STORE_PARAMS
 135   2                  
 136   2              case CMD_STORE_PARAMS:
 137   2                  cmd_store_params();
 138   2                  break;
 139   2      
 140   2      //=================================================     CMD_STORE_DEFAULT_PARAMS
 141   2      
 142   2              case CMD_STORE_DEFAULT_PARAMS:
 143   2                  if(memStore(DEFAULT_EEPROM_DISPLACEMENT))
 144   2                      sendAcknowledgment(ACK_OK);
 145   2                  else
 146   2                      sendAcknowledgment(ACK_ERROR);
 147   2                  break;
 148   2      
 149   2      //=======================================================     CMD_RESTORE_PARAMS
 150   2      
 151   2              case CMD_RESTORE_PARAMS:
 152   2                  if(memRestore())
 153   2                      sendAcknowledgment(ACK_OK);
 154   2                  else
 155   2                      sendAcknowledgment(ACK_ERROR);
 156   2                  break;
 157   2      
 158   2      //=============================================================     CMD_INIT_MEM
 159   2      
 160   2              case CMD_INIT_MEM:
 161   2                  if(memInit())
 162   2                      sendAcknowledgment(ACK_OK);
 163   2                  else
 164   2                      sendAcknowledgment(ACK_ERROR);
 165   2                  break;
 166   2      
 167   2      //===========================================================     CMD_BOOTLOADER
 168   2      
 169   2              case CMD_BOOTLOADER:
 170   2                  //Not sure if ACK_OK is correct, should check
 171   2                  sendAcknowledgment(ACK_OK);
 172   2                  CyDelay(1000);
 173   2                  FTDI_ENABLE_REG_Write(0x00);
 174   2                  CyDelay(1000);
 175   2                  Bootloadable_Load();
 176   2                  break;
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 4   

 177   2      
 178   2      //============================================================     CMD_CALIBRATE
 179   2      
 180   2              case CMD_CALIBRATE:
 181   2                  break;
 182   2                  
 183   2      //=====================================================     CMD_GET_IMU_READINGS
 184   2      
 185   2              case CMD_GET_IMU_READINGS:
 186   2                  cmd_get_imu_readings();
 187   2                  break;
 188   2                       
 189   2                  
 190   2      //=========================================================== ALL OTHER COMMANDS
 191   2              default:
 192   2                  break;
 193   2                  
 194   2          }
 195   1          
 196   1      }
 197          
 198          
 199          //==============================================================================
 200          //                                                                     INFO SEND
 201          //==============================================================================
 202          
 203          void infoSend(){
 204   1          unsigned char packet_string[1100];
 205   1          infoPrepare(packet_string);
 206   1          UART_RS485_PutString(packet_string);
 207   1      }
 208          
 209          
 210          //==============================================================================
 211          //                                                              COMMAND GET INFO
 212          //==============================================================================
 213          
 214          void infoGet(uint16 info_type) {
 215   1          static unsigned char packet_string[1100];
 216   1      
 217   1          //==================================     choose info type and prepare string
 218   1      
 219   1          switch (info_type) {
 220   2              case INFO_ALL:
 221   2                  infoPrepare(packet_string);
 222   2                  UART_RS485_PutString(packet_string);
 223   2                  break;
 224   2      
 225   2              default:
 226   2                  break;
 227   2          }
 228   1      }
 229          
 230          //==============================================================================
 231          //                                                                     SET ZEROS
 232          //==============================================================================
 233          
 234          void setZeros()
 235          {
 236   1          //nothing to do and nothing to say
 237   1      }
 238          
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 5   

 239          //==============================================================================
 240          //                                                            GET PARAMETER LIST
 241          //==============================================================================
 242          
 243          void get_param_list(uint16 index)
 244          {
 245   1          //Package to be sent variables
 246   1          uint8 packet_data[200 + 50*N_IMU_MAX +1] = "";
 247   1          uint16 packet_lenght = 200 + (uint16)(50*N_IMU_Connected) +1;
 248   1      
 249   1          //Auxiliary variables
 250   1          uint16 CYDATA i, j;
 251   1      
 252   1          //Parameters menu string definitions
 253   1          char id_str[15]             = "1 - Device ID:";
 254   1          char n_imu_str[30]          = "2 - Number of connected IMUs:";
 255   1          char ids_str[13]            = "3 - IMUs ID:";
 256   1          char mag_param_str[24]      = "4 - Mag cal parameters:";
 257   1          char imu_table_str[42]      = "";
 258   1      
 259   1          //Strings lenghts
 260   1          uint8 CYDATA id_str_len = strlen(id_str);
 261   1          uint8 CYDATA n_imu_str_len = strlen(n_imu_str);
 262   1          uint8 CYDATA ids_str_len = strlen(ids_str);
 263   1          uint8 CYDATA mag_param_str_len = strlen(mag_param_str);
 264   1          uint8 CYDATA imu_table_str_len = strlen(imu_table_str);
 265   1      
 266   1          packet_data[0] = CMD_GET_PARAM_LIST;
 267   1          packet_data[1] = 4 + (uint8)N_IMU_Connected;        // NUM_PARAMS
 268   1      
 269   1          switch(index) {
 270   2              case 0:         //List of all parameters with relative types
 271   2                  /*-----------------ID-----------------*/
 272   2      
 273   2                  packet_data[2] = TYPE_UINT8;
 274   2                  packet_data[3] = 1;
 275   2                  packet_data[4] = c_mem.id;
 276   2                  for(i = id_str_len; i != 0; i--)
 277   2                      packet_data[5 + id_str_len - i] = id_str[id_str_len - i];
 278   2      
 279   2                  /*-------------N IMU--------------*/
 280   2      
 281   2                  packet_data[52] = TYPE_UINT8;
 282   2                  packet_data[53] = 1;
 283   2                  packet_data[54] = (uint8)N_IMU_Connected;
 284   2                  for(i = n_imu_str_len; i != 0; i--)
 285   2                      packet_data[55 + n_imu_str_len - i] = n_imu_str[n_imu_str_len - i];
 286   2                      
 287   2                  /*-------------IMUS ID--------------*/
 288   2      
 289   2                  packet_data[102] = TYPE_UINT8;
 290   2                  packet_data[103] = (uint8)N_IMU_Connected;
 291   2                  for (i=0; i < N_IMU_Connected; i++) {
 292   3                      packet_data[104 + i] = (uint8)IMU_connected[i];
 293   3                  }
 294   2                  for(j = ids_str_len; j != 0; j--)
 295   2                      packet_data[104 + N_IMU_Connected + ids_str_len - j] = ids_str[ids_str_len - j];
 296   2                      
 297   2                  /*-------------GET MAG PARAM--------------*/
 298   2      
 299   2                  packet_data[152] = TYPE_UINT8;
 300   2                  packet_data[153] = (uint8)(3*N_IMU_Connected);
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 6   

 301   2                  for (i=0; i< N_IMU_Connected; i++) {
 302   3                      packet_data[154 + 3*i] = (uint8) MagCal[IMU_connected[i]][0];
 303   3                      packet_data[155 + 3*i] = (uint8) MagCal[IMU_connected[i]][1];
 304   3                      packet_data[156 + 3*i] = (uint8) MagCal[IMU_connected[i]][2];
 305   3                  }
 306   2                  for(j = mag_param_str_len; j != 0; j--)
 307   2                      packet_data[154 + 3*N_IMU_Connected + mag_param_str_len - j] = mag_param_str[mag_param_str
             -_len - j];
 308   2                  
 309   2                  /*-------------GET IMUS MODE-------------*/
 310   2                 for (i = 0; i < (uint8)N_IMU_Connected; i++){
 311   3      
 312   3                      sprintf(imu_table_str, "%u - IMU %d configuration:", 5+i, (int) IMU_connected[i]);
 313   3                      imu_table_str_len = strlen(imu_table_str);
 314   3                  
 315   3                      packet_data[(uint16)(202 + 50*i)] = TYPE_UINT8;
 316   3                      packet_data[(uint16)(203 + 50*i)] = 5;
 317   3                      
 318   3                      packet_data[(uint16)(204 + 50*i)] = (uint8)(IMU_conf[IMU_connected[i]][0]);
 319   3                      packet_data[(uint16)(205 + 50*i)] = (uint8)(IMU_conf[IMU_connected[i]][1]);
 320   3                      packet_data[(uint16)(206 + 50*i)] = (uint8)(IMU_conf[IMU_connected[i]][2]);
 321   3                      packet_data[(uint16)(207 + 50*i)] = (uint8)(IMU_conf[IMU_connected[i]][3]);
 322   3                      packet_data[(uint16)(208 + 50*i)] = (uint8)(IMU_conf[IMU_connected[i]][4]);
 323   3      
 324   3                      for(j = imu_table_str_len; j != 0; j--)
 325   3                          packet_data[(uint16)(209 + 50*i + imu_table_str_len - j)] = imu_table_str[imu_table_st
             -r_len - j];
 326   3                  }  
 327   2                
 328   2      
 329   2                  /*------------PARAMETERS MENU-----------*/
 330   2      
 331   2                  packet_data[packet_lenght - 1] = LCRChecksum(packet_data,packet_lenght - 1);
 332   2                  commWrite(packet_data, packet_lenght);
 333   2                  UART_RS485_ClearTxBuffer();
 334   2              break;
 335   2      
 336   2      //===================================================================     set_id
 337   2              case 1:         //ID - uint8
 338   2                  g_mem.id = g_rx.buffer[3];
 339   2              break;
 340   2              
 341   2      //=========================================================     n_imu
 342   2              case 2:         //N imu - uint8 (read only)
 343   2              break;
 344   2      
 345   2      //=========================================================     imus_id
 346   2              case 3:         //IMUs ID - uint8 (read only)
 347   2              break;
 348   2                  
 349   2      //=========================================================     get_mag_param
 350   2              case 4:         //get_mag_param - (read only)
 351   2              break;
 352   2      
 353   2      //=========================================================     set_imu_mode
 354   2              default:         //Set Imu table (index > = 5)
 355   2                  IMU_conf[IMU_connected[index-5]][0] = g_rx.buffer[3];
 356   2                  IMU_conf[IMU_connected[index-5]][1] = g_rx.buffer[4];
 357   2                  IMU_conf[IMU_connected[index-5]][2] = g_rx.buffer[5];
 358   2                  IMU_conf[IMU_connected[index-5]][3] = g_rx.buffer[6];
 359   2                  IMU_conf[IMU_connected[index-5]][4] = g_rx.buffer[7];
 360   2                  
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 7   

 361   2                  // Recompute IMU packets dimension
 362   2                  imus_data_size = 1; //header    
 363   2                  for (i = 0; i < N_IMU_Connected; i++)
 364   2                  {
 365   3                      single_imu_size[IMU_connected[i]] = 1 + 6*IMU_conf[IMU_connected[i]][0] + 6*IMU_conf[IMU_c
             -onnected[i]][1] + 6*IMU_conf[IMU_connected[i]][2] + 2*IMU_conf[IMU_connected[i]][4]+ 1;
 366   3                      imus_data_size = imus_data_size + single_imu_size[IMU_connected[i]];
 367   3                  }
 368   2                  imus_data_size = imus_data_size + 1;    //checksum
 369   2                  
 370   2              break;
 371   2                  
 372   2          }
 373   1      }
 374          
 375          
 376          //==============================================================================
 377          //                                                           PREPARE DEVICE INFO
 378          //==============================================================================
 379          
 380          void infoPrepare(unsigned char *info_string)
 381          {
 382   1          int i;
 383   1          if(c_mem.id != 250){                //To avoid dummy board ping
 384   2              unsigned char str[100];
 385   2              strcpy(info_string, "");
 386   2              strcat(info_string, "\r\n");
 387   2              strcat(info_string, "Firmware version: ");
 388   2              strcat(info_string, VERSION);
 389   2              strcat(info_string, "\r\n\r\n");
 390   2      
 391   2              strcat(info_string, "DEVICE INFO\r\n");
 392   2              sprintf(str, "ID: %d\r\n", (int) c_mem.id);
 393   2              strcat(info_string, str);
 394   2           
 395   2              sprintf(str, "IMU Connected: %d\r\n", (int) N_IMU_Connected);
 396   2              strcat(info_string, str);
 397   2              
 398   2              strcat(info_string, "\r\n");
 399   2              
 400   2              
 401   2              strcat(info_string, "IMUs CONFIGURATION\r\n");
 402   2              for (i=0; i<N_IMU_Connected; i++){
 403   3                  sprintf(str, "Imu %d \r\n\tID: %d\r\n", i, (int) IMU_connected[i]);
 404   3                  strcat(info_string, str);
 405   3                  
 406   3                  sprintf(str, "\tAccelerometers: ");
 407   3                  if ((IMU_conf[IMU_connected[i]][0]))
 408   3                      strcat(str, "YES\r\n");
 409   3                  else
 410   3                      strcat(str, "NO\r\n"); 
 411   3                  strcat(str, "\tGyroscopes: ");
 412   3                  if ((IMU_conf[IMU_connected[i]][1]))
 413   3                      strcat(str, "YES\r\n");
 414   3                  else
 415   3                      strcat(str, "NO\r\n"); 
 416   3                  strcat(str, "\tMagnetometers: ");
 417   3                  if ((IMU_conf[IMU_connected[i]][2]))
 418   3                      strcat(str, "YES\r\n");
 419   3                  else
 420   3                      strcat(str, "NO\r\n");
 421   3                  strcat(str, "\tQuaternion: ");                
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 8   

 422   3                  if ((IMU_conf[IMU_connected[i]][3]))
 423   3                      strcat(str, "YES\r\n");
 424   3                  else
 425   3                      strcat(str, "NO\r\n");
 426   3                  strcat(str, "\tTemperature: ");
 427   3                  if ((IMU_conf[IMU_connected[i]][4]))
 428   3                      strcat(str, "YES\r\n");
 429   3                  else
 430   3                      strcat(str, "NO\r\n");
 431   3                  
 432   3                  strcat(info_string, str);
 433   3              }       
 434   2              
 435   2              strcat(info_string, "\r\n");
 436   2                  
 437   2              strcat(info_string, "SENSORS INFO\r\n");
 438   2              for (i=0; i<N_IMU_Connected; i++){
 439   3                  sprintf(str, "Imu %d \r\n\tID: %d\r\n", i, (int) IMU_connected[i]);
 440   3                  strcat(info_string, str);
 441   3                  
 442   3                  if ((IMU_conf[IMU_connected[i]][0])){
 443   4                      sprintf(str, "\tAcc: %d\t%d\t%d\r\n", (int16) g_imu[i].accel_value[0], (int16) g_imu[i].ac
             -cel_value[1],(int16) g_imu[i].accel_value[2]);
 444   4                      strcat(info_string, str);
 445   4                  }
 446   3      
 447   3                  if ((IMU_conf[IMU_connected[i]][1])){
 448   4                      sprintf(str, "\tGyro: %d\t%d\t%d\r\n", (int16) g_imu[i].gyro_value[0], (int16) g_imu[i].gy
             -ro_value[1],(int16) g_imu[i].gyro_value[2]);
 449   4                      strcat(info_string, str);
 450   4                  }
 451   3      
 452   3                  if ((IMU_conf[IMU_connected[i]][2])){
 453   4                      sprintf(str, "\tMag: %d\t%d\t%d\r\n", (int16) g_imu[i].mag_value[0], (int16) g_imu[i].mag_
             -value[1],(int16) g_imu[i].mag_value[2]);
 454   4                      strcat(info_string, str);
 455   4                  }
 456   3                  
 457   3                  if ((IMU_conf[IMU_connected[i]][4])){
 458   4                      sprintf(str, "\tTemperature: %d\r\n", (int16) g_imu[i].temp_value);
 459   4                      strcat(info_string, str);
 460   4                  }
 461   3              
 462   3              }
 463   2              
 464   2              sprintf(str, "debug: %ld", (uint32)timer_value0 - (uint32)timer_value); //5000001
 465   2              strcat(info_string, str);
 466   2              strcat(info_string, "\r\n");
 467   2              strcat(info_string, "\r\n");
 468   2          }
 469   1      }
 470          
 471          //==============================================================================
 472          //                                                      WRITE FUNCTION FOR RS485
 473          //==============================================================================
 474          
 475          void commWrite(uint8 *packet_data, const uint16 packet_lenght)
 476          {
 477   1          uint16 CYDATA index;
 478   1      
 479   1          // frame - start
 480   1          UART_RS485_PutChar(':');
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 9   

 481   1          UART_RS485_PutChar(':');
 482   1          
 483   1          // frame - ID
 484   1          UART_RS485_PutChar(g_mem.id);
 485   1          
 486   1          // frame - length
 487   1          UART_RS485_PutChar((uint8)packet_lenght);
 488   1          
 489   1          // frame - packet data
 490   1          for(index = 0; index < packet_lenght; ++index)
 491   1              UART_RS485_PutChar(packet_data[index]);
 492   1          
 493   1          index = 0;
 494   1      
 495   1          while(!(UART_RS485_ReadTxStatus() & UART_RS485_TX_STS_COMPLETE) && index++ <= 1000){}
 496   1      
 497   1          RS485_CTS_Write(1);
 498   1          RS485_CTS_Write(0);
 499   1      }
 500          
 501          
 502          //==============================================================================
 503          //                                                             CHECKSUM FUNCTION
 504          //==============================================================================
 505          
 506          // Performs a XOR byte by byte on the entire vector
 507          
 508          uint8 LCRChecksum(uint8 *data_array, uint8 data_length) {
 509   1          
 510   1          uint8 CYDATA i;
 511   1          uint8 CYDATA checksum = 0x00;
 512   1          
 513   1          for(i = 0; i < data_length; ++i)
 514   1             checksum ^= data_array[i];
 515   1        
 516   1          return checksum;
 517   1      }
 518          
 519          //==============================================================================
 520          //                                                       ACKNOWLEDGMENT FUNCTION
 521          //==============================================================================
 522          
 523          void sendAcknowledgment(const uint8 value) {
 524   1          int packet_lenght = 2;
 525   1          uint8 packet_data[2];
 526   1      
 527   1          packet_data[0] = value;
 528   1          packet_data[1] = value;
 529   1      
 530   1          commWrite(packet_data, packet_lenght);
 531   1      }
 532          
 533          //==============================================================================
 534          //                                                                  STORE MEMORY
 535          //==============================================================================
 536          
 537          /**
 538          * This function stores current memory settings on the eeprom with the specified
 539          * displacement
 540          **/
 541          
 542          uint8 memStore(int displacement)
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 10  

 543          {
 544   1          int i;  // iterator
 545   1          uint8 writeStatus;
 546   1          int pages;
 547   1          uint8 ret_val = 1;
 548   1      
 549   1          // Disable Interrupt
 550   1          ISR_RS485_RX_Disable();
 551   1      
 552   1      
 553   1          // Retrieve temperature for better writing performance
 554   1          CySetTemp();
 555   1      
 556   1          memcpy( &c_mem, &g_mem, sizeof(g_mem) );
 557   1      
 558   1          pages = sizeof(g_mem) / 16 + (sizeof(g_mem) % 16 > 0);
 559   1      
 560   1          for(i = 0; i < pages; ++i) {
 561   2              writeStatus = EEPROM_Write(&g_mem.flag + 16 * i, i + displacement);
 562   2              if(writeStatus != CYRET_SUCCESS) {
 563   3                  ret_val = 0;
 564   3                  break;
 565   3              }
 566   2          }
 567   1      
 568   1          memcpy( &g_mem, &c_mem, sizeof(g_mem) );
 569   1      
 570   1          // Re-Enable Interrupt
 571   1          ISR_RS485_RX_Enable();
 572   1      
 573   1          return ret_val;
 574   1      }
 575          
 576          
 577          //==============================================================================
 578          //                                                                 RECALL MEMORY
 579          //==============================================================================
 580          
 581          /**
 582          * This function loads user settings from the eeprom.
 583          **/
 584          
 585          void memRecall()
 586          {
 587   1          uint16 i;
 588   1      
 589   1          for (i = 0; i < sizeof(g_mem); i++) {
 590   2              ((reg8 *) &g_mem.flag)[i] = EEPROM_ADDR[i];
 591   2          }
 592   1      
 593   1          //check for initialization
 594   1          if (g_mem.flag == FALSE) {
 595   2              memRestore();
 596   2          } else {
 597   2              memcpy( &c_mem, &g_mem, sizeof(g_mem) );
 598   2          }
 599   1      }
 600          
 601          
 602          //==============================================================================
 603          //                                                                RESTORE MEMORY
 604          //==============================================================================
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 11  

 605          
 606          /**
 607          * This function loads default settings from the eeprom.
 608          **/
 609          
 610          uint8 memRestore() {
 611   1          uint16 i;
 612   1      
 613   1          for (i = 0; i < sizeof(g_mem); i++) {
 614   2              ((reg8 *) &g_mem.flag)[i] = EEPROM_ADDR[i + (DEFAULT_EEPROM_DISPLACEMENT * 16)];
 615   2          }
 616   1      
 617   1          //check for initialization
 618   1          if (g_mem.flag == FALSE) {
 619   2              return memInit();
 620   2          } else {
 621   2              return memStore(0);
 622   2          }
 623   1      }
 624          
 625          //==============================================================================
 626          //                                                                   MEMORY INIT
 627          //==============================================================================
 628          
 629          /**
 630          * This function initialize memory when eeprom is compromised.
 631          **/
 632          
 633          uint8 memInit()
 634          {
 635   1        
 636   1          //initialize memory settings
 637   1          g_mem.id            = 1;
 638   1      
 639   1          
 640   1          // set the initialized flag to show EEPROM has been populated
 641   1          g_mem.flag = TRUE;
 642   1          
 643   1          //write that configuration to EEPROM
 644   1          return ( memStore(0) && memStore(DEFAULT_EEPROM_DISPLACEMENT) );
 645   1      }
 646          
 647          //==============================================================================
 648          //                                                    ROUTINE INTERRUPT FUNCTION
 649          //==============================================================================
 650          /**
 651          * Bunch of functions used on request from UART communication
 652          **/
 653          
 654          void cmd_get_measurements(){
 655   1         //nothing to do and nothing to say 
 656   1      }
 657          
 658          void cmd_set_inputs(){
 659   1         //nothing to do and nothing to say
 660   1      }
 661          
 662          void cmd_activate(){
 663   1          //nothing to do and nothing to say
 664   1      }
 665          
 666          void cmd_get_activate(){
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 12  

 667   1          //nothing to do and nothing to say
 668   1      }
 669          
 670          void cmd_get_curr_and_meas(){
 671   1          //nothing to do and nothing to say   
 672   1      }
 673          
 674          void cmd_get_currents(){
 675   1          //nothing to do and nothing to say
 676   1      }
 677          
 678          void cmd_set_baudrate(){
 679   1          
 680   1          // Set BaudRate
 681   1          c_mem.baud_rate = g_rx.buffer[1];
 682   1          
 683   1          switch(g_rx.buffer[1]){
 684   2              case 13:
 685   2                  CLOCK_UART_SetDividerValue(13);
 686   2                  break;
 687   2              default:
 688   2                  CLOCK_UART_SetDividerValue(3);
 689   2          }
 690   1      }
 691          
 692          void cmd_ping(){
 693   1      
 694   1          uint8 packet_data[2];
 695   1      
 696   1          // Header
 697   1          packet_data[0] = CMD_PING;
 698   1          
 699   1          // Load Payload
 700   1          packet_data[1] = CMD_PING;
 701   1      
 702   1          // Send Package to uart
 703   1          commWrite(packet_data, 2);
 704   1      }
 705          
 706          void cmd_set_watchdog(){
 707   1            
 708   1          if (g_rx.buffer[1] <= 0){
 709   2              // Deactivate Watchdog
 710   2              WATCHDOG_ENABLER_Write(1); 
 711   2              g_mem.watchdog_period = 0;   
 712   2          }
 713   1          else{
 714   2              // Activate Watchdog        
 715   2              if (g_rx.buffer[1] > MAX_WATCHDOG_TIMER)
 716   2                  g_rx.buffer[1] = MAX_WATCHDOG_TIMER;
 717   2                  
 718   2              // Period * Time_CLK = WDT
 719   2              // Period = WTD / Time_CLK =     (WTD    )  / ( ( 1 / Freq_CLK ) )
 720   2              // Set request watchdog period - (WTD * 2)  * (250 / 1024        )
 721   2              g_mem.watchdog_period = (uint8) (((uint32) g_rx.buffer[1] * 2 * 250 ) >> 10);   
 722   2              WATCHDOG_COUNTER_WritePeriod(g_mem.watchdog_period); 
 723   2              WATCHDOG_ENABLER_Write(0); 
 724   2          }
 725   1      }
 726          
 727          void cmd_get_inputs(){
 728   1          //nothing to do and nothing to say
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 13  

 729   1      }
 730          
 731          void cmd_store_params(){
 732   1         
 733   1          if(memStore(0))
 734   1              sendAcknowledgment(ACK_OK);
 735   1          else
 736   1              sendAcknowledgment(ACK_ERROR);
 737   1      }
 738          
 739          void cmd_get_emg(){
 740   1          //nothing to do and nothing to say
 741   1      }
 742          
 743          void cmd_get_imu_readings(){
 744   1          //Retrieve accelerometers, gyroscopes and magnetometers readings
 745   1          
 746   1          uint8 k_imu;
 747   1          uint8 c = 1;
 748   1          uint8 k = 0;
 749   1          uint8 gl_c = 1;
 750   1          
 751   1          // Packet: header + imu id(uint8) + imu flags(uint8) + crc  
 752   1          uint8 packet_data[350];
 753   1          uint8 single_packet[22];
 754   1          
 755   1          // Packet to send is handled here (in this way you work with last consistent data)
 756   1          //isr_imu_Disable();
 757   1          
 758   1          //Header package 
 759   1          packet_data[0] = CMD_GET_IMU_READINGS;
 760   1       
 761   1          for (k_imu = 0; k_imu < N_IMU_Connected; k_imu++) 
 762   1          {   
 763   2              
 764   2              single_packet[0] = (uint8) 0x3A; //':';
 765   2              if (IMU_conf[IMU_connected[k_imu]][0]){
 766   3                  *((int16 *) &single_packet[c]) = (int16) g_imu[k_imu].accel_value[0];
 767   3                  *((int16 *) &single_packet[c+2]) = (int16) g_imu[k_imu].accel_value[1];
 768   3                  *((int16 *) &single_packet[c+4]) = (int16) g_imu[k_imu].accel_value[2];
 769   3                  c = c + 6;
 770   3              }
 771   2              if (IMU_conf[IMU_connected[k_imu]][1]){
 772   3                  *((int16 *) &single_packet[c])   = (int16) g_imu[k_imu].gyro_value[0];
 773   3                  *((int16 *) &single_packet[c+2]) = (int16) g_imu[k_imu].gyro_value[1];
 774   3                  *((int16 *) &single_packet[c+4]) = (int16) g_imu[k_imu].gyro_value[2];
 775   3                  c = c + 6;
 776   3              }
 777   2              if (IMU_conf[IMU_connected[k_imu]][2]){
 778   3                  *((int16 *) &single_packet[c])   = (int16) g_imu[k_imu].mag_value[0];
 779   3                  *((int16 *) &single_packet[c+2]) = (int16) g_imu[k_imu].mag_value[1];
 780   3                  *((int16 *) &single_packet[c+4]) = (int16) g_imu[k_imu].mag_value[2];
 781   3                  c = c + 6;
 782   3              }
 783   2              if (IMU_conf[IMU_connected[k_imu]][4]){
 784   3                  *((int16 *) &single_packet[c])   = (int16) g_imu[k_imu].temp_value;
 785   3                  c = c + 2;
 786   3              }
 787   2              single_packet[single_imu_size[IMU_connected[k_imu]] - 1] = (uint8) 0x3A; //':';
 788   2              c = 1;
 789   2                     
 790   2              for(k=0; k < single_imu_size[IMU_connected[k_imu]]; k++) {
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 14  

 791   3                  packet_data[gl_c + k] = (uint8) single_packet[k]; 
 792   3              }
 793   2              gl_c = gl_c + single_imu_size[IMU_connected[k_imu]];  
 794   2              
 795   2              memset(&single_packet, 0, sizeof(single_packet));     
 796   2              
 797   2          }
 798   1      
 799   1          // Calculate Checksum and send message to UART 
 800   1          packet_data[imus_data_size-1] = LCRChecksum (packet_data, imus_data_size-1);
 801   1          commWrite(packet_data, imus_data_size);
 802   1          
 803   1          //isr_imu_Enable();
 804   1      }
 805          
 806          
 807          /* [] END OF FILE */
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 15  

ASSEMBLY LISTING OF GENERATED OBJECT CODE


             ; FUNCTION commProcess (BEGIN)
                                           ; SOURCE LINE # 39
                                           ; SOURCE LINE # 43
0000 900000      E     MOV     DPTR,#g_rx
0003 E0                MOVX    A,@DPTR
0004 F500        R     MOV     rx_cmd,A
                                           ; SOURCE LINE # 47
0006 7B01              MOV     R3,#01H
0008 7A00        E     MOV     R2,#HIGH g_rx
000A 7900        E     MOV     R1,#LOW g_rx
000C 900000      E     MOV     DPTR,#g_rx+080H
000F E0                MOVX    A,@DPTR
0010 A3                INC     DPTR
0011 E0                MOVX    A,@DPTR
0012 14                DEC     A
0013 FD                MOV     R5,A
0014 120000      R     LCALL   _LCRChecksum
0017 900000      E     MOV     DPTR,#g_rx+080H
001A E0                MOVX    A,@DPTR
001B FC                MOV     R4,A
001C A3                INC     DPTR
001D E0                MOVX    A,@DPTR
001E 2400        E     ADD     A,#LOW g_rx+0FFFFH
0020 F582              MOV     DPL,A
0022 7400        E     MOV     A,#HIGH g_rx+0FFFFH
0024 3C                ADDC    A,R4
0025 F583              MOV     DPH,A
0027 E0                MOVX    A,@DPTR
0028 B50703            CJNE    A,AR7,?C0002
002B D3                SETB    C
002C 8001              SJMP    ?C0003
002E         ?C0002:
002E C3                CLR     C
002F         ?C0003:
002F 4006              JC      ?C0001
                                           ; SOURCE LINE # 49
0031 E4                CLR     A
0032 900000      E     MOV     DPTR,#g_rx+084H
0035 F0                MOVX    @DPTR,A
0036 22                RET     
                                           ; SOURCE LINE # 51
0037         ?C0001:
                                           ; SOURCE LINE # 54
0037 E500        R     MOV     A,rx_cmd
0039 120000      E     LCALL   ?C?CCASE
003C 0000        R     DW      ?C0018
003E 00                DB      00H
003F 0000        R     DW      ?C0016
0041 01                DB      01H
0042 0000        R     DW      ?C0019
0044 03                DB      03H
0045 0000        R     DW      ?C0020
0047 04                DB      04H
0048 0000        R     DW      ?C0023
004A 05                DB      05H
004B 0000        R     DW      ?C0015
004D 06                DB      06H
004E 0000        R     DW      ?C0029
0050 09                DB      09H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 16  

0051 0000        R     DW      ?C0026
0053 0A                DB      0AH
0054 0000        R     DW      ?C0017
0056 0C                DB      0CH
0057 0000        R     DW      ?C0006
0059 80                DB      080H
005A 0000        R     DW      ?C0012
005C 81                DB      081H
005D 0000        R     DW      ?C0007
005F 82                DB      082H
0060 0000        R     DW      ?C0014
0062 83                DB      083H
0063 0000        R     DW      ?C0008
0065 84                DB      084H
0066 0000        R     DW      ?C0009
0068 85                DB      085H
0069 0000        R     DW      ?C0010
006B 88                DB      088H
006C 0000        R     DW      ?C0011
006E 8A                DB      08AH
006F 0000        R     DW      ?C0013
0071 8B                DB      08BH
0072 0000        R     DW      ?C0031
0074 A1                DB      0A1H
0075 0000              DW      00H
0077 0000        R     DW      ?C0004
                                           ; SOURCE LINE # 57
0079         ?C0006:
                                           ; SOURCE LINE # 58
0079 120000      R     LCALL   cmd_activate
                                           ; SOURCE LINE # 59
007C 22                RET     
                                           ; SOURCE LINE # 63
007D         ?C0007:
                                           ; SOURCE LINE # 64
007D 120000      R     LCALL   cmd_set_inputs
                                           ; SOURCE LINE # 65
0080 22                RET     
                                           ; SOURCE LINE # 69
0081         ?C0008:
                                           ; SOURCE LINE # 70
0081 120000      R     LCALL   cmd_get_measurements
                                           ; SOURCE LINE # 71
0084 22                RET     
                                           ; SOURCE LINE # 75
0085         ?C0009:
                                           ; SOURCE LINE # 76
0085 120000      R     LCALL   cmd_get_currents
                                           ; SOURCE LINE # 77
0088 22                RET     
                                           ; SOURCE LINE # 82
0089         ?C0010:
                                           ; SOURCE LINE # 83
0089 120000      R     LCALL   cmd_get_emg
                                           ; SOURCE LINE # 84
008C 22                RET     
                                           ; SOURCE LINE # 88
008D         ?C0011:
                                           ; SOURCE LINE # 89
008D 120000      R     LCALL   cmd_set_watchdog
                                           ; SOURCE LINE # 90
0090 22                RET     
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 17  

                                           ; SOURCE LINE # 94
0091         ?C0012:
                                           ; SOURCE LINE # 95
0091 120000      R     LCALL   cmd_get_activate
                                           ; SOURCE LINE # 96
0094 22                RET     
                                           ; SOURCE LINE # 100
0095         ?C0013:
                                           ; SOURCE LINE # 101
0095 120000      R     LCALL   cmd_set_baudrate
                                           ; SOURCE LINE # 102
0098 22                RET     
                                           ; SOURCE LINE # 106
0099         ?C0014:
                                           ; SOURCE LINE # 107
0099 120000      R     LCALL   cmd_get_inputs
                                           ; SOURCE LINE # 108
009C 22                RET     
                                           ; SOURCE LINE # 112
009D         ?C0015:
                                           ; SOURCE LINE # 113
009D 900000      E     MOV     DPTR,#g_rx+01H
00A0 E0                MOVX    A,@DPTR
00A1 FE                MOV     R6,A
00A2 A3                INC     DPTR
00A3 E0                MOVX    A,@DPTR
00A4 FF                MOV     R7,A
00A5 120000      R     LCALL   _infoGet
                                           ; SOURCE LINE # 114
00A8 22                RET     
                                           ; SOURCE LINE # 118
00A9         ?C0016:
                                           ; SOURCE LINE # 119
00A9 120000      R     LCALL   setZeros
                                           ; SOURCE LINE # 120
00AC 22                RET     
                                           ; SOURCE LINE # 124
00AD         ?C0017:
                                           ; SOURCE LINE # 125
00AD 900000      E     MOV     DPTR,#g_rx+01H
00B0 E0                MOVX    A,@DPTR
00B1 FE                MOV     R6,A
00B2 A3                INC     DPTR
00B3 E0                MOVX    A,@DPTR
00B4 FF                MOV     R7,A
00B5 120000      R     LCALL   _get_param_list
                                           ; SOURCE LINE # 126
00B8 22                RET     
                                           ; SOURCE LINE # 130
00B9         ?C0018:
                                           ; SOURCE LINE # 131
00B9 120000      R     LCALL   cmd_ping
                                           ; SOURCE LINE # 132
00BC 22                RET     
                                           ; SOURCE LINE # 136
00BD         ?C0019:
                                           ; SOURCE LINE # 137
00BD 120000      R     LCALL   cmd_store_params
                                           ; SOURCE LINE # 138
00C0 22                RET     
                                           ; SOURCE LINE # 142
00C1         ?C0020:
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 18  

                                           ; SOURCE LINE # 143
00C1 7F08              MOV     R7,#08H
00C3 7E00              MOV     R6,#00H
00C5 120000      R     LCALL   _memStore
00C8 EF                MOV     A,R7
00C9 6006              JZ      ?C0021
                                           ; SOURCE LINE # 144
00CB 7F01              MOV     R7,#01H
00CD 120000      R     LCALL   _sendAcknowledgment
00D0 22                RET     
00D1         ?C0021:
                                           ; SOURCE LINE # 146
00D1 E4                CLR     A
00D2 FF                MOV     R7,A
00D3 120000      R     LCALL   _sendAcknowledgment
                                           ; SOURCE LINE # 147
00D6 22                RET     
                                           ; SOURCE LINE # 151
00D7         ?C0023:
                                           ; SOURCE LINE # 152
00D7 120000      R     LCALL   memRestore
00DA EF                MOV     A,R7
00DB 6006              JZ      ?C0024
                                           ; SOURCE LINE # 153
00DD 7F01              MOV     R7,#01H
00DF 120000      R     LCALL   _sendAcknowledgment
00E2 22                RET     
00E3         ?C0024:
                                           ; SOURCE LINE # 155
00E3 E4                CLR     A
00E4 FF                MOV     R7,A
00E5 120000      R     LCALL   _sendAcknowledgment
                                           ; SOURCE LINE # 156
00E8 22                RET     
                                           ; SOURCE LINE # 160
00E9         ?C0026:
                                           ; SOURCE LINE # 161
00E9 120000      R     LCALL   memInit
00EC EF                MOV     A,R7
00ED 6006              JZ      ?C0027
                                           ; SOURCE LINE # 162
00EF 7F01              MOV     R7,#01H
00F1 120000      R     LCALL   _sendAcknowledgment
00F4 22                RET     
00F5         ?C0027:
                                           ; SOURCE LINE # 164
00F5 E4                CLR     A
00F6 FF                MOV     R7,A
00F7 120000      R     LCALL   _sendAcknowledgment
                                           ; SOURCE LINE # 165
00FA 22                RET     
                                           ; SOURCE LINE # 169
00FB         ?C0029:
                                           ; SOURCE LINE # 171
00FB 7F01              MOV     R7,#01H
00FD 120000      R     LCALL   _sendAcknowledgment
                                           ; SOURCE LINE # 172
0100 E4                CLR     A
0101 7FE8              MOV     R7,#0E8H
0103 7E03              MOV     R6,#03H
0105 FD                MOV     R5,A
0106 FC                MOV     R4,A
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 19  

0107 120000      E     LCALL   _?CyDelay
                                           ; SOURCE LINE # 173
010A E4                CLR     A
010B FF                MOV     R7,A
010C 120000      E     LCALL   _FTDI_ENABLE_REG_Write
                                           ; SOURCE LINE # 174
010F E4                CLR     A
0110 7FE8              MOV     R7,#0E8H
0112 7E03              MOV     R6,#03H
0114 FD                MOV     R5,A
0115 FC                MOV     R4,A
0116 120000      E     LCALL   _?CyDelay
                                           ; SOURCE LINE # 175
0119 120000      E     LCALL   Bootloadable_Load
                                           ; SOURCE LINE # 176
011C 22                RET     
                                           ; SOURCE LINE # 180
                                           ; SOURCE LINE # 181
                                           ; SOURCE LINE # 185
011D         ?C0031:
                                           ; SOURCE LINE # 186
011D 120000      R     LCALL   cmd_get_imu_readings
                                           ; SOURCE LINE # 187
                                           ; SOURCE LINE # 191
                                           ; SOURCE LINE # 192
                                           ; SOURCE LINE # 194
                                           ; SOURCE LINE # 196
0120         ?C0004:
0120 22                RET     
             ; FUNCTION commProcess (END)

             ; FUNCTION infoSend (BEGIN)
                                           ; SOURCE LINE # 203
                                           ; SOURCE LINE # 205
0000 7B01              MOV     R3,#01H
0002 7A00        R     MOV     R2,#HIGH packet_string
0004 7900        R     MOV     R1,#LOW packet_string
0006 120000      R     LCALL   _infoPrepare
                                           ; SOURCE LINE # 206
0009 7B01              MOV     R3,#01H
000B 7A00        R     MOV     R2,#HIGH packet_string
000D 7900        R     MOV     R1,#LOW packet_string
000F 120000      E     LCALL   _UART_RS485_PutString
                                           ; SOURCE LINE # 207
0012 22                RET     
             ; FUNCTION infoSend (END)

             ; FUNCTION _infoGet (BEGIN)
                                           ; SOURCE LINE # 214
;---- Variable 'info_type' assigned to Register 'R6/R7' ----
                                           ; SOURCE LINE # 219
0000 EF                MOV     A,R7
0001 7015              JNZ     ?C0037
0003 EE                MOV     A,R6
0004 7012              JNZ     ?C0037
                                           ; SOURCE LINE # 220
0006         ?C0035:
                                           ; SOURCE LINE # 221
0006 7B01              MOV     R3,#01H
0008 7A00        R     MOV     R2,#HIGH packet_string
000A 7900        R     MOV     R1,#LOW packet_string
000C 120000      R     LCALL   _infoPrepare
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 20  

                                           ; SOURCE LINE # 222
000F 7B01              MOV     R3,#01H
0011 7A00        R     MOV     R2,#HIGH packet_string
0013 7900        R     MOV     R1,#LOW packet_string
0015 120000      E     LCALL   _UART_RS485_PutString
                                           ; SOURCE LINE # 223
                                           ; SOURCE LINE # 225
                                           ; SOURCE LINE # 226
                                           ; SOURCE LINE # 227
                                           ; SOURCE LINE # 228
0018         ?C0037:
0018 22                RET     
             ; FUNCTION _infoGet (END)

             ; FUNCTION setZeros (BEGIN)
                                           ; SOURCE LINE # 234
                                           ; SOURCE LINE # 235
                                           ; SOURCE LINE # 237
0000 22                RET     
             ; FUNCTION setZeros (END)

             ; FUNCTION _get_param_list (BEGIN)
                                           ; SOURCE LINE # 243
0000 900000      R     MOV     DPTR,#index
0003 EE                MOV     A,R6
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EF                MOV     A,R7
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 244
                                           ; SOURCE LINE # 246
0008 7800        R     MOV     R0,#LOW packet_data
000A 7C00        R     MOV     R4,#HIGH packet_data
000C 7D01              MOV     R5,#01H
000E 7BFF              MOV     R3,#0FFH
0010 7A00        R     MOV     R2,#HIGH _?ix1000
0012 7900        R     MOV     R1,#LOW _?ix1000
0014 7E04              MOV     R6,#04H
0016 7F1B              MOV     R7,#01BH
0018 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 247
001B 900000      E     MOV     DPTR,#N_IMU_Connected
001E E0                MOVX    A,@DPTR
001F 75F032            MOV     B,#032H
0022 A4                MUL     AB
0023 24C9              ADD     A,#0C9H
0025 FE                MOV     R6,A
0026 E4                CLR     A
0027 35F0              ADDC    A,B
0029 900000      R     MOV     DPTR,#packet_lenght
002C F0                MOVX    @DPTR,A
002D A3                INC     DPTR
002E CE                XCH     A,R6
002F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 253
0030 7800        R     MOV     R0,#LOW id_str
0032 7C00        R     MOV     R4,#HIGH id_str
0034 7D01              MOV     R5,#01H
0036 7BFF              MOV     R3,#0FFH
0038 7A00        R     MOV     R2,#HIGH _?ix1001
003A 7900        R     MOV     R1,#LOW _?ix1001
003C 7E00              MOV     R6,#00H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 21  

003E 7F0F              MOV     R7,#0FH
0040 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 254
0043 7800        R     MOV     R0,#LOW n_imu_str
0045 7C00        R     MOV     R4,#HIGH n_imu_str
0047 7D01              MOV     R5,#01H
0049 7BFF              MOV     R3,#0FFH
004B 7A00        R     MOV     R2,#HIGH _?ix1002
004D 7900        R     MOV     R1,#LOW _?ix1002
004F 7E00              MOV     R6,#00H
0051 7F1E              MOV     R7,#01EH
0053 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 255
0056 7800        R     MOV     R0,#LOW ids_str
0058 7C00        R     MOV     R4,#HIGH ids_str
005A 7D01              MOV     R5,#01H
005C 7BFF              MOV     R3,#0FFH
005E 7A00        R     MOV     R2,#HIGH _?ix1003
0060 7900        R     MOV     R1,#LOW _?ix1003
0062 7E00              MOV     R6,#00H
0064 7F0D              MOV     R7,#0DH
0066 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 256
0069 7800        R     MOV     R0,#LOW mag_param_str
006B 7C00        R     MOV     R4,#HIGH mag_param_str
006D 7D01              MOV     R5,#01H
006F 7BFF              MOV     R3,#0FFH
0071 7A00        R     MOV     R2,#HIGH _?ix1004
0073 7900        R     MOV     R1,#LOW _?ix1004
0075 7E00              MOV     R6,#00H
0077 7F18              MOV     R7,#018H
0079 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 257
007C 7800        R     MOV     R0,#LOW imu_table_str
007E 7C00        R     MOV     R4,#HIGH imu_table_str
0080 7D01              MOV     R5,#01H
0082 7BFF              MOV     R3,#0FFH
0084 7A00        R     MOV     R2,#HIGH _?ix1005
0086 7900        R     MOV     R1,#LOW _?ix1005
0088 7E00              MOV     R6,#00H
008A 7F2A              MOV     R7,#02AH
008C 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 260
008F 7B01              MOV     R3,#01H
0091 7A00        R     MOV     R2,#HIGH id_str
0093 7900        R     MOV     R1,#LOW id_str
0095 120000      E     LCALL   _strlen
0098 8F00        R     MOV     id_str_len,R7
                                           ; SOURCE LINE # 261
009A 7B01              MOV     R3,#01H
009C 7A00        R     MOV     R2,#HIGH n_imu_str
009E 7900        R     MOV     R1,#LOW n_imu_str
00A0 120000      E     LCALL   _strlen
00A3 8F00        R     MOV     n_imu_str_len,R7
                                           ; SOURCE LINE # 262
00A5 7B01              MOV     R3,#01H
00A7 7A00        R     MOV     R2,#HIGH ids_str
00A9 7900        R     MOV     R1,#LOW ids_str
00AB 120000      E     LCALL   _strlen
00AE 8F00        R     MOV     ids_str_len,R7
                                           ; SOURCE LINE # 263
00B0 7B01              MOV     R3,#01H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 22  

00B2 7A00        R     MOV     R2,#HIGH mag_param_str
00B4 7900        R     MOV     R1,#LOW mag_param_str
00B6 120000      E     LCALL   _strlen
00B9 8F00        R     MOV     mag_param_str_len,R7
                                           ; SOURCE LINE # 264
00BB 7B01              MOV     R3,#01H
00BD 7A00        R     MOV     R2,#HIGH imu_table_str
00BF 7900        R     MOV     R1,#LOW imu_table_str
00C1 120000      E     LCALL   _strlen
00C4 8F00        R     MOV     imu_table_str_len,R7
                                           ; SOURCE LINE # 266
00C6 900000      R     MOV     DPTR,#packet_data
00C9 740C              MOV     A,#0CH
00CB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 267
00CC 900000      E     MOV     DPTR,#N_IMU_Connected
00CF E0                MOVX    A,@DPTR
00D0 2404              ADD     A,#04H
00D2 900000      R     MOV     DPTR,#packet_data+01H
00D5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 269
00D6 900000      R     MOV     DPTR,#index
00D9 E0                MOVX    A,@DPTR
00DA FE                MOV     R6,A
00DB A3                INC     DPTR
00DC E0                MOVX    A,@DPTR
00DD FF                MOV     R7,A
00DE EE                MOV     A,R6
00DF 6003              JZ      $ + 5H
00E1 020000      R     LJMP    ?C0069
00E4 EF                MOV     A,R7
00E5 14                DEC     A
00E6 7003              JNZ     $ + 5H
00E8 020000      R     LJMP    ?C0065
00EB 24FC              ADD     A,#0FCH
00ED 4003              JC      $ + 5H
00EF 020000      R     LJMP    ?C0073
00F2 2405              ADD     A,#05H
00F4 6003              JZ      $ + 5H
00F6 020000      R     LJMP    ?C0069
                                           ; SOURCE LINE # 270
00F9         ?C0040:
                                           ; SOURCE LINE # 273
00F9 900000      R     MOV     DPTR,#packet_data+02H
00FC 7402              MOV     A,#02H
00FE F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 274
00FF A3                INC     DPTR
0100 14                DEC     A
0101 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 275
0102 900000      E     MOV     DPTR,#c_mem+01H
0105 E0                MOVX    A,@DPTR
0106 900000      R     MOV     DPTR,#packet_data+04H
0109 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 276
010A 750000      R     MOV     i,#00H
010D 850000      R     MOV     i+01H,id_str_len
0110         ?C0041:
0110 E500        R     MOV     A,i+01H
0112 4500        R     ORL     A,i
0114 602C              JZ      ?C0042
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 23  

                                           ; SOURCE LINE # 277
0116 C3                CLR     C
0117 E500        R     MOV     A,id_str_len
0119 9500        R     SUBB    A,i+01H
011B FF                MOV     R7,A
011C E4                CLR     A
011D 9500        R     SUBB    A,i
011F FE                MOV     R6,A
0120 7400        R     MOV     A,#LOW id_str
0122 2F                ADD     A,R7
0123 F582              MOV     DPL,A
0125 7400        R     MOV     A,#HIGH id_str
0127 3E                ADDC    A,R6
0128 F583              MOV     DPH,A
012A E0                MOVX    A,@DPTR
012B FD                MOV     R5,A
012C 7400        R     MOV     A,#LOW packet_data+05H
012E 2F                ADD     A,R7
012F F582              MOV     DPL,A
0131 7400        R     MOV     A,#HIGH packet_data+05H
0133 3E                ADDC    A,R6
0134 F583              MOV     DPH,A
0136 ED                MOV     A,R5
0137 F0                MOVX    @DPTR,A
0138 E500        R     MOV     A,i+01H
013A 1500        R     DEC     i+01H
013C 7002              JNZ     ?C0158
013E 1500        R     DEC     i
0140         ?C0158:
0140 80CE              SJMP    ?C0041
0142         ?C0042:
                                           ; SOURCE LINE # 281
0142 900000      R     MOV     DPTR,#packet_data+034H
0145 7402              MOV     A,#02H
0147 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 282
0148 A3                INC     DPTR
0149 14                DEC     A
014A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 283
014B 900000      E     MOV     DPTR,#N_IMU_Connected
014E E0                MOVX    A,@DPTR
014F 900000      R     MOV     DPTR,#packet_data+036H
0152 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 284
0153 750000      R     MOV     i,#00H
0156 850000      R     MOV     i+01H,n_imu_str_len
0159         ?C0044:
0159 E500        R     MOV     A,i+01H
015B 4500        R     ORL     A,i
015D 602C              JZ      ?C0045
                                           ; SOURCE LINE # 285
015F C3                CLR     C
0160 E500        R     MOV     A,n_imu_str_len
0162 9500        R     SUBB    A,i+01H
0164 FF                MOV     R7,A
0165 E4                CLR     A
0166 9500        R     SUBB    A,i
0168 FE                MOV     R6,A
0169 7400        R     MOV     A,#LOW n_imu_str
016B 2F                ADD     A,R7
016C F582              MOV     DPL,A
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 24  

016E 7400        R     MOV     A,#HIGH n_imu_str
0170 3E                ADDC    A,R6
0171 F583              MOV     DPH,A
0173 E0                MOVX    A,@DPTR
0174 FD                MOV     R5,A
0175 7400        R     MOV     A,#LOW packet_data+037H
0177 2F                ADD     A,R7
0178 F582              MOV     DPL,A
017A 7400        R     MOV     A,#HIGH packet_data+037H
017C 3E                ADDC    A,R6
017D F583              MOV     DPH,A
017F ED                MOV     A,R5
0180 F0                MOVX    @DPTR,A
0181 E500        R     MOV     A,i+01H
0183 1500        R     DEC     i+01H
0185 7002              JNZ     ?C0159
0187 1500        R     DEC     i
0189         ?C0159:
0189 80CE              SJMP    ?C0044
018B         ?C0045:
                                           ; SOURCE LINE # 289
018B 900000      R     MOV     DPTR,#packet_data+066H
018E 7402              MOV     A,#02H
0190 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 290
0191 900000      E     MOV     DPTR,#N_IMU_Connected
0194 E0                MOVX    A,@DPTR
0195 900000      R     MOV     DPTR,#packet_data+067H
0198 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 291
0199 E4                CLR     A
019A F500        R     MOV     i,A
019C F500        R     MOV     i+01H,A
019E         ?C0047:
019E 900000      E     MOV     DPTR,#N_IMU_Connected
01A1 E0                MOVX    A,@DPTR
01A2 FF                MOV     R7,A
01A3 C3                CLR     C
01A4 E500        R     MOV     A,i+01H
01A6 9F                SUBB    A,R7
01A7 E500        R     MOV     A,i
01A9 9400              SUBB    A,#00H
01AB 5026              JNC     ?C0048
                                           ; SOURCE LINE # 292
01AD 7400        E     MOV     A,#LOW IMU_connected
01AF 2500        R     ADD     A,i+01H
01B1 F582              MOV     DPL,A
01B3 7400        E     MOV     A,#HIGH IMU_connected
01B5 3500        R     ADDC    A,i
01B7 F583              MOV     DPH,A
01B9 E0                MOVX    A,@DPTR
01BA FF                MOV     R7,A
01BB 7400        R     MOV     A,#LOW packet_data+068H
01BD 2500        R     ADD     A,i+01H
01BF F582              MOV     DPL,A
01C1 7400        R     MOV     A,#HIGH packet_data+068H
01C3 3500        R     ADDC    A,i
01C5 F583              MOV     DPH,A
01C7 EF                MOV     A,R7
01C8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 293
01C9 0500        R     INC     i+01H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 25  

01CB E500        R     MOV     A,i+01H
01CD 7002              JNZ     ?C0160
01CF 0500        R     INC     i
01D1         ?C0160:
01D1 80CB              SJMP    ?C0047
01D3         ?C0048:
                                           ; SOURCE LINE # 294
01D3 750000      R     MOV     j,#00H
01D6 850000      R     MOV     j+01H,ids_str_len
01D9         ?C0050:
01D9 E500        R     MOV     A,j+01H
01DB 4500        R     ORL     A,j
01DD 6041              JZ      ?C0051
                                           ; SOURCE LINE # 295
01DF C3                CLR     C
01E0 E500        R     MOV     A,ids_str_len
01E2 9500        R     SUBB    A,j+01H
01E4 FF                MOV     R7,A
01E5 E4                CLR     A
01E6 9500        R     SUBB    A,j
01E8 FE                MOV     R6,A
01E9 7400        R     MOV     A,#LOW ids_str
01EB 2F                ADD     A,R7
01EC F582              MOV     DPL,A
01EE 7400        R     MOV     A,#HIGH ids_str
01F0 3E                ADDC    A,R6
01F1 F583              MOV     DPH,A
01F3 E0                MOVX    A,@DPTR
01F4 FF                MOV     R7,A
01F5 E500        R     MOV     A,ids_str_len
01F7 FD                MOV     R5,A
01F8 900000      E     MOV     DPTR,#N_IMU_Connected
01FB E0                MOVX    A,@DPTR
01FC 2D                ADD     A,R5
01FD FD                MOV     R5,A
01FE E4                CLR     A
01FF 33                RLC     A
0200 FC                MOV     R4,A
0201 C3                CLR     C
0202 ED                MOV     A,R5
0203 9500        R     SUBB    A,j+01H
0205 FD                MOV     R5,A
0206 EC                MOV     A,R4
0207 9500        R     SUBB    A,j
0209 FC                MOV     R4,A
020A 7400        R     MOV     A,#LOW packet_data+068H
020C 2D                ADD     A,R5
020D F582              MOV     DPL,A
020F 7400        R     MOV     A,#HIGH packet_data+068H
0211 3C                ADDC    A,R4
0212 F583              MOV     DPH,A
0214 EF                MOV     A,R7
0215 F0                MOVX    @DPTR,A
0216 E500        R     MOV     A,j+01H
0218 1500        R     DEC     j+01H
021A 7002              JNZ     ?C0161
021C 1500        R     DEC     j
021E         ?C0161:
021E 80B9              SJMP    ?C0050
0220         ?C0051:
                                           ; SOURCE LINE # 299
0220 900000      R     MOV     DPTR,#packet_data+098H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 26  

0223 7402              MOV     A,#02H
0225 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 300
0226 900000      E     MOV     DPTR,#N_IMU_Connected
0229 E0                MOVX    A,@DPTR
022A 75F003            MOV     B,#03H
022D A4                MUL     AB
022E 900000      R     MOV     DPTR,#packet_data+099H
0231 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 301
0232 E4                CLR     A
0233 F500        R     MOV     i,A
0235 F500        R     MOV     i+01H,A
0237         ?C0053:
0237 900000      E     MOV     DPTR,#N_IMU_Connected
023A E0                MOVX    A,@DPTR
023B FF                MOV     R7,A
023C C3                CLR     C
023D E500        R     MOV     A,i+01H
023F 9F                SUBB    A,R7
0240 E500        R     MOV     A,i
0242 9400              SUBB    A,#00H
0244 4003              JC      $ + 5H
0246 020000      R     LJMP    ?C0054
                                           ; SOURCE LINE # 302
0249 7400        E     MOV     A,#LOW IMU_connected
024B 2500        R     ADD     A,i+01H
024D F582              MOV     DPL,A
024F 7400        E     MOV     A,#HIGH IMU_connected
0251 3500        R     ADDC    A,i
0253 F583              MOV     DPH,A
0255 E0                MOVX    A,@DPTR
0256 75F003            MOV     B,#03H
0259 A4                MUL     AB
025A 2400        E     ADD     A,#LOW MagCal
025C F582              MOV     DPL,A
025E E4                CLR     A
025F 3400        E     ADDC    A,#HIGH MagCal
0261 F583              MOV     DPH,A
0263 E0                MOVX    A,@DPTR
0264 FF                MOV     R7,A
0265 900000      R     MOV     DPTR,#packet_data+09AH
0268 75F003            MOV     B,#03H
026B E500        R     MOV     A,i+01H
026D 120000      E     LCALL   ?C?OFFXADD
0270 E500        R     MOV     A,i
0272 75F003            MOV     B,#03H
0275 A4                MUL     AB
0276 2583              ADD     A,DPH
0278 F583              MOV     DPH,A
027A EF                MOV     A,R7
027B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 303
027C 7400        E     MOV     A,#LOW IMU_connected
027E 2500        R     ADD     A,i+01H
0280 F582              MOV     DPL,A
0282 7400        E     MOV     A,#HIGH IMU_connected
0284 3500        R     ADDC    A,i
0286 F583              MOV     DPH,A
0288 E0                MOVX    A,@DPTR
0289 75F003            MOV     B,#03H
028C A4                MUL     AB
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 27  

028D 2400        E     ADD     A,#LOW MagCal+01H
028F F582              MOV     DPL,A
0291 E4                CLR     A
0292 3400        E     ADDC    A,#HIGH MagCal+01H
0294 F583              MOV     DPH,A
0296 E0                MOVX    A,@DPTR
0297 FF                MOV     R7,A
0298 900000      R     MOV     DPTR,#packet_data+09BH
029B 75F003            MOV     B,#03H
029E E500        R     MOV     A,i+01H
02A0 120000      E     LCALL   ?C?OFFXADD
02A3 E500        R     MOV     A,i
02A5 75F003            MOV     B,#03H
02A8 A4                MUL     AB
02A9 2583              ADD     A,DPH
02AB F583              MOV     DPH,A
02AD EF                MOV     A,R7
02AE F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 304
02AF 7400        E     MOV     A,#LOW IMU_connected
02B1 2500        R     ADD     A,i+01H
02B3 F582              MOV     DPL,A
02B5 7400        E     MOV     A,#HIGH IMU_connected
02B7 3500        R     ADDC    A,i
02B9 F583              MOV     DPH,A
02BB E0                MOVX    A,@DPTR
02BC 75F003            MOV     B,#03H
02BF A4                MUL     AB
02C0 2400        E     ADD     A,#LOW MagCal+02H
02C2 F582              MOV     DPL,A
02C4 E4                CLR     A
02C5 3400        E     ADDC    A,#HIGH MagCal+02H
02C7 F583              MOV     DPH,A
02C9 E0                MOVX    A,@DPTR
02CA FF                MOV     R7,A
02CB 900000      R     MOV     DPTR,#packet_data+09CH
02CE 75F003            MOV     B,#03H
02D1 E500        R     MOV     A,i+01H
02D3 120000      E     LCALL   ?C?OFFXADD
02D6 E500        R     MOV     A,i
02D8 75F003            MOV     B,#03H
02DB A4                MUL     AB
02DC 2583              ADD     A,DPH
02DE F583              MOV     DPH,A
02E0 EF                MOV     A,R7
02E1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 305
02E2 0500        R     INC     i+01H
02E4 E500        R     MOV     A,i+01H
02E6 7002              JNZ     ?C0162
02E8 0500        R     INC     i
02EA         ?C0162:
02EA 020000      R     LJMP    ?C0053
02ED         ?C0054:
                                           ; SOURCE LINE # 306
02ED 750000      R     MOV     j,#00H
02F0 850000      R     MOV     j+01H,mag_param_str_len
02F3         ?C0056:
02F3 E500        R     MOV     A,j+01H
02F5 4500        R     ORL     A,j
02F7 6046              JZ      ?C0057
                                           ; SOURCE LINE # 307
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 28  

02F9 E500        R     MOV     A,mag_param_str_len
02FB FD                MOV     R5,A
02FC 7C00              MOV     R4,#00H
02FE C3                CLR     C
02FF 9500        R     SUBB    A,j+01H
0301 FF                MOV     R7,A
0302 EC                MOV     A,R4
0303 9500        R     SUBB    A,j
0305 FE                MOV     R6,A
0306 7400        R     MOV     A,#LOW mag_param_str
0308 2F                ADD     A,R7
0309 F582              MOV     DPL,A
030B 7400        R     MOV     A,#HIGH mag_param_str
030D 3E                ADDC    A,R6
030E F583              MOV     DPH,A
0310 E0                MOVX    A,@DPTR
0311 FB                MOV     R3,A
0312 900000      E     MOV     DPTR,#N_IMU_Connected
0315 E0                MOVX    A,@DPTR
0316 75F003            MOV     B,#03H
0319 A4                MUL     AB
031A 2D                ADD     A,R5
031B FF                MOV     R7,A
031C EC                MOV     A,R4
031D 35F0              ADDC    A,B
031F FE                MOV     R6,A
0320 C3                CLR     C
0321 EF                MOV     A,R7
0322 9500        R     SUBB    A,j+01H
0324 FF                MOV     R7,A
0325 EE                MOV     A,R6
0326 9500        R     SUBB    A,j
0328 FE                MOV     R6,A
0329 7400        R     MOV     A,#LOW packet_data+09AH
032B 2F                ADD     A,R7
032C F582              MOV     DPL,A
032E 7400        R     MOV     A,#HIGH packet_data+09AH
0330 3E                ADDC    A,R6
0331 F583              MOV     DPH,A
0333 EB                MOV     A,R3
0334 F0                MOVX    @DPTR,A
0335 E500        R     MOV     A,j+01H
0337 1500        R     DEC     j+01H
0339 7002              JNZ     ?C0163
033B 1500        R     DEC     j
033D         ?C0163:
033D 80B4              SJMP    ?C0056
033F         ?C0057:
                                           ; SOURCE LINE # 310
033F E4                CLR     A
0340 F500        R     MOV     i,A
0342 F500        R     MOV     i+01H,A
0344         ?C0059:
0344 900000      E     MOV     DPTR,#N_IMU_Connected
0347 E0                MOVX    A,@DPTR
0348 FF                MOV     R7,A
0349 C3                CLR     C
034A E500        R     MOV     A,i+01H
034C 9F                SUBB    A,R7
034D E500        R     MOV     A,i
034F 9400              SUBB    A,#00H
0351 4003              JC      $ + 5H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 29  

0353 020000      R     LJMP    ?C0060
                                           ; SOURCE LINE # 312
0356 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
0359 74FF              MOV     A,#0FFH
035B F0                MOVX    @DPTR,A
035C A3                INC     DPTR
035D 7400        R     MOV     A,#HIGH ?SC_0
035F F0                MOVX    @DPTR,A
0360 A3                INC     DPTR
0361 7400        R     MOV     A,#LOW ?SC_0
0363 F0                MOVX    @DPTR,A
0364 E500        R     MOV     A,i+01H
0366 2405              ADD     A,#05H
0368 900000      E     MOV     DPTR,#?_sprintf?BYTE+07H
036B F0                MOVX    @DPTR,A
036C E4                CLR     A
036D 3500        R     ADDC    A,i
036F 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
0372 F0                MOVX    @DPTR,A
0373 7400        E     MOV     A,#LOW IMU_connected
0375 2500        R     ADD     A,i+01H
0377 F582              MOV     DPL,A
0379 7400        E     MOV     A,#HIGH IMU_connected
037B 3500        R     ADDC    A,i
037D F583              MOV     DPH,A
037F E0                MOVX    A,@DPTR
0380 FF                MOV     R7,A
0381 900000      E     MOV     DPTR,#?_sprintf?BYTE+08H
0384 E4                CLR     A
0385 F0                MOVX    @DPTR,A
0386 A3                INC     DPTR
0387 EF                MOV     A,R7
0388 F0                MOVX    @DPTR,A
0389 7B01              MOV     R3,#01H
038B 7A00        R     MOV     R2,#HIGH imu_table_str
038D 7900        R     MOV     R1,#LOW imu_table_str
038F 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 313
0392 7B01              MOV     R3,#01H
0394 7A00        R     MOV     R2,#HIGH imu_table_str
0396 7900        R     MOV     R1,#LOW imu_table_str
0398 120000      E     LCALL   _strlen
039B 8F00        R     MOV     imu_table_str_len,R7
                                           ; SOURCE LINE # 315
039D 900000      R     MOV     DPTR,#packet_data+0CAH
03A0 75F032            MOV     B,#032H
03A3 E500        R     MOV     A,i+01H
03A5 120000      E     LCALL   ?C?OFFXADD
03A8 E500        R     MOV     A,i
03AA 75F032            MOV     B,#032H
03AD A4                MUL     AB
03AE 2583              ADD     A,DPH
03B0 F583              MOV     DPH,A
03B2 7402              MOV     A,#02H
03B4 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 316
03B5 900000      R     MOV     DPTR,#packet_data+0CBH
03B8 75F032            MOV     B,#032H
03BB E500        R     MOV     A,i+01H
03BD 120000      E     LCALL   ?C?OFFXADD
03C0 E500        R     MOV     A,i
03C2 75F032            MOV     B,#032H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 30  

03C5 A4                MUL     AB
03C6 2583              ADD     A,DPH
03C8 F583              MOV     DPH,A
03CA 7405              MOV     A,#05H
03CC F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 318
03CD 7400        E     MOV     A,#LOW IMU_connected
03CF 2500        R     ADD     A,i+01H
03D1 F582              MOV     DPL,A
03D3 7400        E     MOV     A,#HIGH IMU_connected
03D5 3500        R     ADDC    A,i
03D7 F583              MOV     DPH,A
03D9 E0                MOVX    A,@DPTR
03DA 75F005            MOV     B,#05H
03DD A4                MUL     AB
03DE 2400        E     ADD     A,#LOW IMU_conf
03E0 F582              MOV     DPL,A
03E2 E4                CLR     A
03E3 3400        E     ADDC    A,#HIGH IMU_conf
03E5 F583              MOV     DPH,A
03E7 E0                MOVX    A,@DPTR
03E8 FF                MOV     R7,A
03E9 900000      R     MOV     DPTR,#packet_data+0CCH
03EC 75F032            MOV     B,#032H
03EF E500        R     MOV     A,i+01H
03F1 120000      E     LCALL   ?C?OFFXADD
03F4 E500        R     MOV     A,i
03F6 75F032            MOV     B,#032H
03F9 A4                MUL     AB
03FA 2583              ADD     A,DPH
03FC F583              MOV     DPH,A
03FE EF                MOV     A,R7
03FF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 319
0400 7400        E     MOV     A,#LOW IMU_connected
0402 2500        R     ADD     A,i+01H
0404 F582              MOV     DPL,A
0406 7400        E     MOV     A,#HIGH IMU_connected
0408 3500        R     ADDC    A,i
040A F583              MOV     DPH,A
040C E0                MOVX    A,@DPTR
040D 75F005            MOV     B,#05H
0410 A4                MUL     AB
0411 2400        E     ADD     A,#LOW IMU_conf+01H
0413 F582              MOV     DPL,A
0415 E4                CLR     A
0416 3400        E     ADDC    A,#HIGH IMU_conf+01H
0418 F583              MOV     DPH,A
041A E0                MOVX    A,@DPTR
041B FF                MOV     R7,A
041C 900000      R     MOV     DPTR,#packet_data+0CDH
041F 75F032            MOV     B,#032H
0422 E500        R     MOV     A,i+01H
0424 120000      E     LCALL   ?C?OFFXADD
0427 E500        R     MOV     A,i
0429 75F032            MOV     B,#032H
042C A4                MUL     AB
042D 2583              ADD     A,DPH
042F F583              MOV     DPH,A
0431 EF                MOV     A,R7
0432 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 320
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 31  

0433 7400        E     MOV     A,#LOW IMU_connected
0435 2500        R     ADD     A,i+01H
0437 F582              MOV     DPL,A
0439 7400        E     MOV     A,#HIGH IMU_connected
043B 3500        R     ADDC    A,i
043D F583              MOV     DPH,A
043F E0                MOVX    A,@DPTR
0440 75F005            MOV     B,#05H
0443 A4                MUL     AB
0444 2400        E     ADD     A,#LOW IMU_conf+02H
0446 F582              MOV     DPL,A
0448 E4                CLR     A
0449 3400        E     ADDC    A,#HIGH IMU_conf+02H
044B F583              MOV     DPH,A
044D E0                MOVX    A,@DPTR
044E FF                MOV     R7,A
044F 900000      R     MOV     DPTR,#packet_data+0CEH
0452 75F032            MOV     B,#032H
0455 E500        R     MOV     A,i+01H
0457 120000      E     LCALL   ?C?OFFXADD
045A E500        R     MOV     A,i
045C 75F032            MOV     B,#032H
045F A4                MUL     AB
0460 2583              ADD     A,DPH
0462 F583              MOV     DPH,A
0464 EF                MOV     A,R7
0465 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 321
0466 7400        E     MOV     A,#LOW IMU_connected
0468 2500        R     ADD     A,i+01H
046A F582              MOV     DPL,A
046C 7400        E     MOV     A,#HIGH IMU_connected
046E 3500        R     ADDC    A,i
0470 F583              MOV     DPH,A
0472 E0                MOVX    A,@DPTR
0473 75F005            MOV     B,#05H
0476 A4                MUL     AB
0477 2400        E     ADD     A,#LOW IMU_conf+03H
0479 F582              MOV     DPL,A
047B E4                CLR     A
047C 3400        E     ADDC    A,#HIGH IMU_conf+03H
047E F583              MOV     DPH,A
0480 E0                MOVX    A,@DPTR
0481 FF                MOV     R7,A
0482 900000      R     MOV     DPTR,#packet_data+0CFH
0485 75F032            MOV     B,#032H
0488 E500        R     MOV     A,i+01H
048A 120000      E     LCALL   ?C?OFFXADD
048D E500        R     MOV     A,i
048F 75F032            MOV     B,#032H
0492 A4                MUL     AB
0493 2583              ADD     A,DPH
0495 F583              MOV     DPH,A
0497 EF                MOV     A,R7
0498 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 322
0499 7400        E     MOV     A,#LOW IMU_connected
049B 2500        R     ADD     A,i+01H
049D F582              MOV     DPL,A
049F 7400        E     MOV     A,#HIGH IMU_connected
04A1 3500        R     ADDC    A,i
04A3 F583              MOV     DPH,A
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 32  

04A5 E0                MOVX    A,@DPTR
04A6 75F005            MOV     B,#05H
04A9 A4                MUL     AB
04AA 2400        E     ADD     A,#LOW IMU_conf+04H
04AC F582              MOV     DPL,A
04AE E4                CLR     A
04AF 3400        E     ADDC    A,#HIGH IMU_conf+04H
04B1 F583              MOV     DPH,A
04B3 E0                MOVX    A,@DPTR
04B4 FF                MOV     R7,A
04B5 900000      R     MOV     DPTR,#packet_data+0D0H
04B8 75F032            MOV     B,#032H
04BB E500        R     MOV     A,i+01H
04BD 120000      E     LCALL   ?C?OFFXADD
04C0 E500        R     MOV     A,i
04C2 75F032            MOV     B,#032H
04C5 A4                MUL     AB
04C6 2583              ADD     A,DPH
04C8 F583              MOV     DPH,A
04CA EF                MOV     A,R7
04CB F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 324
04CC 750000      R     MOV     j,#00H
04CF 850000      R     MOV     j+01H,imu_table_str_len
04D2         ?C0062:
04D2 E500        R     MOV     A,j+01H
04D4 4500        R     ORL     A,j
04D6 6047              JZ      ?C0061
                                           ; SOURCE LINE # 325
04D8 C3                CLR     C
04D9 E500        R     MOV     A,imu_table_str_len
04DB 9500        R     SUBB    A,j+01H
04DD FF                MOV     R7,A
04DE E4                CLR     A
04DF 9500        R     SUBB    A,j
04E1 FE                MOV     R6,A
04E2 7400        R     MOV     A,#LOW imu_table_str
04E4 2F                ADD     A,R7
04E5 F582              MOV     DPL,A
04E7 7400        R     MOV     A,#HIGH imu_table_str
04E9 3E                ADDC    A,R6
04EA F583              MOV     DPH,A
04EC E0                MOVX    A,@DPTR
04ED FB                MOV     R3,A
04EE AE00        R     MOV     R6,i
04F0 AF00        R     MOV     R7,i+01H
04F2 7C00              MOV     R4,#00H
04F4 7D32              MOV     R5,#032H
04F6 120000      E     LCALL   ?C?IMUL
04F9 EF                MOV     A,R7
04FA 2500        R     ADD     A,imu_table_str_len
04FC FF                MOV     R7,A
04FD EC                MOV     A,R4
04FE 3E                ADDC    A,R6
04FF FE                MOV     R6,A
0500 C3                CLR     C
0501 EF                MOV     A,R7
0502 9500        R     SUBB    A,j+01H
0504 FF                MOV     R7,A
0505 EE                MOV     A,R6
0506 9500        R     SUBB    A,j
0508 FE                MOV     R6,A
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 33  

0509 7400        R     MOV     A,#LOW packet_data+0D1H
050B 2F                ADD     A,R7
050C F582              MOV     DPL,A
050E 7400        R     MOV     A,#HIGH packet_data+0D1H
0510 3E                ADDC    A,R6
0511 F583              MOV     DPH,A
0513 EB                MOV     A,R3
0514 F0                MOVX    @DPTR,A
0515 E500        R     MOV     A,j+01H
0517 1500        R     DEC     j+01H
0519 7002              JNZ     ?C0164
051B 1500        R     DEC     j
051D         ?C0164:
051D 80B3              SJMP    ?C0062
                                           ; SOURCE LINE # 326
051F         ?C0061:
051F 0500        R     INC     i+01H
0521 E500        R     MOV     A,i+01H
0523 7002              JNZ     ?C0165
0525 0500        R     INC     i
0527         ?C0165:
0527 020000      R     LJMP    ?C0059
052A         ?C0060:
                                           ; SOURCE LINE # 331
052A 7B01              MOV     R3,#01H
052C 7A00        R     MOV     R2,#HIGH packet_data
052E 7900        R     MOV     R1,#LOW packet_data
0530 900000      R     MOV     DPTR,#packet_lenght
0533 E0                MOVX    A,@DPTR
0534 A3                INC     DPTR
0535 E0                MOVX    A,@DPTR
0536 14                DEC     A
0537 FD                MOV     R5,A
0538 120000      R     LCALL   _LCRChecksum
053B 900000      R     MOV     DPTR,#packet_lenght
053E E0                MOVX    A,@DPTR
053F FC                MOV     R4,A
0540 A3                INC     DPTR
0541 E0                MOVX    A,@DPTR
0542 FD                MOV     R5,A
0543 2400        R     ADD     A,#LOW packet_data+0FFFFH
0545 F582              MOV     DPL,A
0547 7400        R     MOV     A,#HIGH packet_data+0FFFFH
0549 3C                ADDC    A,R4
054A F583              MOV     DPH,A
054C EF                MOV     A,R7
054D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 332
054E 7B01              MOV     R3,#01H
0550 7A00        R     MOV     R2,#HIGH packet_data
0552 7900        R     MOV     R1,#LOW packet_data
0554 120000      R     LCALL   _commWrite
                                           ; SOURCE LINE # 333
0557 120000      E     LCALL   UART_RS485_ClearTxBuffer
                                           ; SOURCE LINE # 334
055A 22                RET     
                                           ; SOURCE LINE # 337
055B         ?C0065:
                                           ; SOURCE LINE # 338
055B 900000      E     MOV     DPTR,#g_rx+03H
055E E0                MOVX    A,@DPTR
055F 900000      E     MOV     DPTR,#g_mem+01H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 34  

0562 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 339
0563 22                RET     
                                           ; SOURCE LINE # 342
                                           ; SOURCE LINE # 343
                                           ; SOURCE LINE # 346
                                           ; SOURCE LINE # 347
0564 22                RET     
                                           ; SOURCE LINE # 350
                                           ; SOURCE LINE # 351
                                           ; SOURCE LINE # 354
0565         ?C0069:
                                           ; SOURCE LINE # 355
0565 900000      E     MOV     DPTR,#g_rx+03H
0568 E0                MOVX    A,@DPTR
0569 FF                MOV     R7,A
056A 900000      R     MOV     DPTR,#index
056D E0                MOVX    A,@DPTR
056E FC                MOV     R4,A
056F A3                INC     DPTR
0570 E0                MOVX    A,@DPTR
0571 FD                MOV     R5,A
0572 2400        E     ADD     A,#LOW IMU_connected+0FFFBH
0574 F582              MOV     DPL,A
0576 7400        E     MOV     A,#HIGH IMU_connected+0FFFBH
0578 3C                ADDC    A,R4
0579 F583              MOV     DPH,A
057B E0                MOVX    A,@DPTR
057C 75F005            MOV     B,#05H
057F A4                MUL     AB
0580 2400        E     ADD     A,#LOW IMU_conf
0582 F582              MOV     DPL,A
0584 E4                CLR     A
0585 3400        E     ADDC    A,#HIGH IMU_conf
0587 F583              MOV     DPH,A
0589 EF                MOV     A,R7
058A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 356
058B 900000      E     MOV     DPTR,#g_rx+04H
058E E0                MOVX    A,@DPTR
058F FF                MOV     R7,A
0590 7400        E     MOV     A,#LOW IMU_connected+0FFFBH
0592 2D                ADD     A,R5
0593 F582              MOV     DPL,A
0595 7400        E     MOV     A,#HIGH IMU_connected+0FFFBH
0597 3C                ADDC    A,R4
0598 F583              MOV     DPH,A
059A E0                MOVX    A,@DPTR
059B 75F005            MOV     B,#05H
059E A4                MUL     AB
059F 2400        E     ADD     A,#LOW IMU_conf+01H
05A1 F582              MOV     DPL,A
05A3 E4                CLR     A
05A4 3400        E     ADDC    A,#HIGH IMU_conf+01H
05A6 F583              MOV     DPH,A
05A8 EF                MOV     A,R7
05A9 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 357
05AA 900000      E     MOV     DPTR,#g_rx+05H
05AD E0                MOVX    A,@DPTR
05AE FF                MOV     R7,A
05AF 7400        E     MOV     A,#LOW IMU_connected+0FFFBH
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 35  

05B1 2D                ADD     A,R5
05B2 F582              MOV     DPL,A
05B4 7400        E     MOV     A,#HIGH IMU_connected+0FFFBH
05B6 3C                ADDC    A,R4
05B7 F583              MOV     DPH,A
05B9 E0                MOVX    A,@DPTR
05BA 75F005            MOV     B,#05H
05BD A4                MUL     AB
05BE 2400        E     ADD     A,#LOW IMU_conf+02H
05C0 F582              MOV     DPL,A
05C2 E4                CLR     A
05C3 3400        E     ADDC    A,#HIGH IMU_conf+02H
05C5 F583              MOV     DPH,A
05C7 EF                MOV     A,R7
05C8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 358
05C9 900000      E     MOV     DPTR,#g_rx+06H
05CC E0                MOVX    A,@DPTR
05CD FF                MOV     R7,A
05CE 7400        E     MOV     A,#LOW IMU_connected+0FFFBH
05D0 2D                ADD     A,R5
05D1 F582              MOV     DPL,A
05D3 7400        E     MOV     A,#HIGH IMU_connected+0FFFBH
05D5 3C                ADDC    A,R4
05D6 F583              MOV     DPH,A
05D8 E0                MOVX    A,@DPTR
05D9 75F005            MOV     B,#05H
05DC A4                MUL     AB
05DD 2400        E     ADD     A,#LOW IMU_conf+03H
05DF F582              MOV     DPL,A
05E1 E4                CLR     A
05E2 3400        E     ADDC    A,#HIGH IMU_conf+03H
05E4 F583              MOV     DPH,A
05E6 EF                MOV     A,R7
05E7 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 359
05E8 900000      E     MOV     DPTR,#g_rx+07H
05EB E0                MOVX    A,@DPTR
05EC FF                MOV     R7,A
05ED 7400        E     MOV     A,#LOW IMU_connected+0FFFBH
05EF 2D                ADD     A,R5
05F0 F582              MOV     DPL,A
05F2 7400        E     MOV     A,#HIGH IMU_connected+0FFFBH
05F4 3C                ADDC    A,R4
05F5 F583              MOV     DPH,A
05F7 E0                MOVX    A,@DPTR
05F8 75F005            MOV     B,#05H
05FB A4                MUL     AB
05FC 2400        E     ADD     A,#LOW IMU_conf+04H
05FE F582              MOV     DPL,A
0600 E4                CLR     A
0601 3400        E     ADDC    A,#HIGH IMU_conf+04H
0603 F583              MOV     DPH,A
0605 EF                MOV     A,R7
0606 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 362
0607 900000      E     MOV     DPTR,#imus_data_size
060A E4                CLR     A
060B F0                MOVX    @DPTR,A
060C A3                INC     DPTR
060D 04                INC     A
060E F0                MOVX    @DPTR,A
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 36  

                                           ; SOURCE LINE # 363
060F E4                CLR     A
0610 F500        R     MOV     i,A
0612 F500        R     MOV     i+01H,A
0614         ?C0070:
0614 900000      E     MOV     DPTR,#N_IMU_Connected
0617 E0                MOVX    A,@DPTR
0618 FF                MOV     R7,A
0619 C3                CLR     C
061A E500        R     MOV     A,i+01H
061C 9F                SUBB    A,R7
061D E500        R     MOV     A,i
061F 9400              SUBB    A,#00H
0621 4003              JC      $ + 5H
0623 020000      R     LJMP    ?C0071
                                           ; SOURCE LINE # 364
                                           ; SOURCE LINE # 365
0626 7400        E     MOV     A,#LOW IMU_connected
0628 2500        R     ADD     A,i+01H
062A F582              MOV     DPL,A
062C 7400        E     MOV     A,#HIGH IMU_connected
062E 3500        R     ADDC    A,i
0630 F583              MOV     DPH,A
0632 E0                MOVX    A,@DPTR
0633 FF                MOV     R7,A
0634 75F005            MOV     B,#05H
0637 A4                MUL     AB
0638 2400        E     ADD     A,#LOW IMU_conf+01H
063A F582              MOV     DPL,A
063C E4                CLR     A
063D 3400        E     ADDC    A,#HIGH IMU_conf+01H
063F F583              MOV     DPH,A
0641 E0                MOVX    A,@DPTR
0642 75F006            MOV     B,#06H
0645 A4                MUL     AB
0646 FE                MOV     R6,A
0647 EF                MOV     A,R7
0648 75F005            MOV     B,#05H
064B A4                MUL     AB
064C 2400        E     ADD     A,#LOW IMU_conf
064E F582              MOV     DPL,A
0650 E4                CLR     A
0651 3400        E     ADDC    A,#HIGH IMU_conf
0653 F583              MOV     DPH,A
0655 E0                MOVX    A,@DPTR
0656 75F006            MOV     B,#06H
0659 A4                MUL     AB
065A 2E                ADD     A,R6
065B FF                MOV     R7,A
065C 7400        E     MOV     A,#LOW IMU_connected
065E 2500        R     ADD     A,i+01H
0660 F582              MOV     DPL,A
0662 7400        E     MOV     A,#HIGH IMU_connected
0664 3500        R     ADDC    A,i
0666 F583              MOV     DPH,A
0668 E0                MOVX    A,@DPTR
0669 FE                MOV     R6,A
066A 75F005            MOV     B,#05H
066D A4                MUL     AB
066E 2400        E     ADD     A,#LOW IMU_conf+02H
0670 F582              MOV     DPL,A
0672 E4                CLR     A
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 37  

0673 3400        E     ADDC    A,#HIGH IMU_conf+02H
0675 F583              MOV     DPH,A
0677 E0                MOVX    A,@DPTR
0678 75F006            MOV     B,#06H
067B A4                MUL     AB
067C 2F                ADD     A,R7
067D FF                MOV     R7,A
067E EE                MOV     A,R6
067F 75F005            MOV     B,#05H
0682 A4                MUL     AB
0683 2400        E     ADD     A,#LOW IMU_conf+04H
0685 F582              MOV     DPL,A
0687 E4                CLR     A
0688 3400        E     ADDC    A,#HIGH IMU_conf+04H
068A F583              MOV     DPH,A
068C E0                MOVX    A,@DPTR
068D 25E0              ADD     A,ACC
068F 2F                ADD     A,R7
0690 2402              ADD     A,#02H
0692 FF                MOV     R7,A
0693 7400        E     MOV     A,#LOW IMU_connected
0695 2500        R     ADD     A,i+01H
0697 F582              MOV     DPL,A
0699 7400        E     MOV     A,#HIGH IMU_connected
069B 3500        R     ADDC    A,i
069D F583              MOV     DPH,A
069F E0                MOVX    A,@DPTR
06A0 25E0              ADD     A,ACC
06A2 2400        E     ADD     A,#LOW single_imu_size
06A4 F582              MOV     DPL,A
06A6 E4                CLR     A
06A7 3400        E     ADDC    A,#HIGH single_imu_size
06A9 F583              MOV     DPH,A
06AB E4                CLR     A
06AC F0                MOVX    @DPTR,A
06AD A3                INC     DPTR
06AE EF                MOV     A,R7
06AF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 366
06B0 7400        E     MOV     A,#LOW IMU_connected
06B2 2500        R     ADD     A,i+01H
06B4 F582              MOV     DPL,A
06B6 7400        E     MOV     A,#HIGH IMU_connected
06B8 3500        R     ADDC    A,i
06BA F583              MOV     DPH,A
06BC E0                MOVX    A,@DPTR
06BD 25E0              ADD     A,ACC
06BF 2400        E     ADD     A,#LOW single_imu_size
06C1 F582              MOV     DPL,A
06C3 E4                CLR     A
06C4 3400        E     ADDC    A,#HIGH single_imu_size
06C6 F583              MOV     DPH,A
06C8 E0                MOVX    A,@DPTR
06C9 FE                MOV     R6,A
06CA A3                INC     DPTR
06CB E0                MOVX    A,@DPTR
06CC FF                MOV     R7,A
06CD 900000      E     MOV     DPTR,#imus_data_size+01H
06D0 E0                MOVX    A,@DPTR
06D1 2F                ADD     A,R7
06D2 F0                MOVX    @DPTR,A
06D3 900000      E     MOV     DPTR,#imus_data_size
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 38  

06D6 E0                MOVX    A,@DPTR
06D7 3E                ADDC    A,R6
06D8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 367
06D9 0500        R     INC     i+01H
06DB E500        R     MOV     A,i+01H
06DD 7002              JNZ     ?C0166
06DF 0500        R     INC     i
06E1         ?C0166:
06E1 020000      R     LJMP    ?C0070
06E4         ?C0071:
                                           ; SOURCE LINE # 368
06E4 900000      E     MOV     DPTR,#imus_data_size+01H
06E7 E0                MOVX    A,@DPTR
06E8 04                INC     A
06E9 F0                MOVX    @DPTR,A
06EA 7006              JNZ     ?C0167
06EC 900000      E     MOV     DPTR,#imus_data_size
06EF E0                MOVX    A,@DPTR
06F0 04                INC     A
06F1 F0                MOVX    @DPTR,A
06F2         ?C0167:
                                           ; SOURCE LINE # 370
                                           ; SOURCE LINE # 372
                                           ; SOURCE LINE # 373
06F2         ?C0073:
06F2 22                RET     
             ; FUNCTION _get_param_list (END)

             ; FUNCTION _infoPrepare (BEGIN)
                                           ; SOURCE LINE # 380
0000 900000      R     MOV     DPTR,#info_string
0003 EB                MOV     A,R3
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EA                MOV     A,R2
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 E9                MOV     A,R1
000A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 381
                                           ; SOURCE LINE # 383
000B 900000      E     MOV     DPTR,#c_mem+01H
000E E0                MOVX    A,@DPTR
000F 64FA              XRL     A,#0FAH
0011 7003              JNZ     $ + 5H
0013 020000      R     LJMP    ?C0095
                                           ; SOURCE LINE # 385
0016 900000      R     MOV     DPTR,#info_string
0019 E0                MOVX    A,@DPTR
001A FB                MOV     R3,A
001B A3                INC     DPTR
001C E0                MOVX    A,@DPTR
001D FA                MOV     R2,A
001E A3                INC     DPTR
001F E0                MOVX    A,@DPTR
0020 F8                MOV     R0,A
0021 AC02              MOV     R4,AR2
0023 AD03              MOV     R5,AR3
0025 7BFF              MOV     R3,#0FFH
0027 7A00        R     MOV     R2,#HIGH ?SC_27
0029 7900        R     MOV     R1,#LOW ?SC_27
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 39  

002B 120000      E     LCALL   ?C?STRCPYAMD
                                           ; SOURCE LINE # 386
002E 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
0031 74FF              MOV     A,#0FFH
0033 F0                MOVX    @DPTR,A
0034 A3                INC     DPTR
0035 7400        R     MOV     A,#HIGH ?SC_28
0037 F0                MOVX    @DPTR,A
0038 A3                INC     DPTR
0039 7400        R     MOV     A,#LOW ?SC_28
003B F0                MOVX    @DPTR,A
003C 900000      R     MOV     DPTR,#info_string
003F E0                MOVX    A,@DPTR
0040 FB                MOV     R3,A
0041 A3                INC     DPTR
0042 E0                MOVX    A,@DPTR
0043 FA                MOV     R2,A
0044 A3                INC     DPTR
0045 E0                MOVX    A,@DPTR
0046 F9                MOV     R1,A
0047 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 387
004A 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
004D 74FF              MOV     A,#0FFH
004F F0                MOVX    @DPTR,A
0050 A3                INC     DPTR
0051 7400        R     MOV     A,#HIGH ?SC_31
0053 F0                MOVX    @DPTR,A
0054 A3                INC     DPTR
0055 7400        R     MOV     A,#LOW ?SC_31
0057 F0                MOVX    @DPTR,A
0058 900000      R     MOV     DPTR,#info_string
005B E0                MOVX    A,@DPTR
005C FB                MOV     R3,A
005D A3                INC     DPTR
005E E0                MOVX    A,@DPTR
005F FA                MOV     R2,A
0060 A3                INC     DPTR
0061 E0                MOVX    A,@DPTR
0062 F9                MOV     R1,A
0063 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 388
0066 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
0069 74FF              MOV     A,#0FFH
006B F0                MOVX    @DPTR,A
006C A3                INC     DPTR
006D 7400        R     MOV     A,#HIGH ?SC_50
006F F0                MOVX    @DPTR,A
0070 A3                INC     DPTR
0071 7400        R     MOV     A,#LOW ?SC_50
0073 F0                MOVX    @DPTR,A
0074 900000      R     MOV     DPTR,#info_string
0077 E0                MOVX    A,@DPTR
0078 FB                MOV     R3,A
0079 A3                INC     DPTR
007A E0                MOVX    A,@DPTR
007B FA                MOV     R2,A
007C A3                INC     DPTR
007D E0                MOVX    A,@DPTR
007E F9                MOV     R1,A
007F 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 389
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 40  

0082 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
0085 74FF              MOV     A,#0FFH
0087 F0                MOVX    @DPTR,A
0088 A3                INC     DPTR
0089 7400        R     MOV     A,#HIGH ?SC_67
008B F0                MOVX    @DPTR,A
008C A3                INC     DPTR
008D 7400        R     MOV     A,#LOW ?SC_67
008F F0                MOVX    @DPTR,A
0090 900000      R     MOV     DPTR,#info_string
0093 E0                MOVX    A,@DPTR
0094 FB                MOV     R3,A
0095 A3                INC     DPTR
0096 E0                MOVX    A,@DPTR
0097 FA                MOV     R2,A
0098 A3                INC     DPTR
0099 E0                MOVX    A,@DPTR
009A F9                MOV     R1,A
009B 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 391
009E 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
00A1 74FF              MOV     A,#0FFH
00A3 F0                MOVX    @DPTR,A
00A4 A3                INC     DPTR
00A5 7400        R     MOV     A,#HIGH ?SC_72
00A7 F0                MOVX    @DPTR,A
00A8 A3                INC     DPTR
00A9 7400        R     MOV     A,#LOW ?SC_72
00AB F0                MOVX    @DPTR,A
00AC 900000      R     MOV     DPTR,#info_string
00AF E0                MOVX    A,@DPTR
00B0 FB                MOV     R3,A
00B1 A3                INC     DPTR
00B2 E0                MOVX    A,@DPTR
00B3 FA                MOV     R2,A
00B4 A3                INC     DPTR
00B5 E0                MOVX    A,@DPTR
00B6 F9                MOV     R1,A
00B7 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 392
00BA 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
00BD 74FF              MOV     A,#0FFH
00BF F0                MOVX    @DPTR,A
00C0 A3                INC     DPTR
00C1 7400        R     MOV     A,#HIGH ?SC_86
00C3 F0                MOVX    @DPTR,A
00C4 A3                INC     DPTR
00C5 7400        R     MOV     A,#LOW ?SC_86
00C7 F0                MOVX    @DPTR,A
00C8 900000      E     MOV     DPTR,#c_mem+01H
00CB E0                MOVX    A,@DPTR
00CC FF                MOV     R7,A
00CD 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
00D0 E4                CLR     A
00D1 F0                MOVX    @DPTR,A
00D2 A3                INC     DPTR
00D3 EF                MOV     A,R7
00D4 F0                MOVX    @DPTR,A
00D5 7B01              MOV     R3,#01H
00D7 7A00        R     MOV     R2,#HIGH str
00D9 7900        R     MOV     R1,#LOW str
00DB 120000      E     LCALL   _sprintf
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 41  

                                           ; SOURCE LINE # 393
00DE 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
00E1 7401              MOV     A,#01H
00E3 F0                MOVX    @DPTR,A
00E4 A3                INC     DPTR
00E5 7400        R     MOV     A,#HIGH str
00E7 F0                MOVX    @DPTR,A
00E8 A3                INC     DPTR
00E9 7400        R     MOV     A,#LOW str
00EB F0                MOVX    @DPTR,A
00EC 900000      R     MOV     DPTR,#info_string
00EF E0                MOVX    A,@DPTR
00F0 FB                MOV     R3,A
00F1 A3                INC     DPTR
00F2 E0                MOVX    A,@DPTR
00F3 FA                MOV     R2,A
00F4 A3                INC     DPTR
00F5 E0                MOVX    A,@DPTR
00F6 F9                MOV     R1,A
00F7 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 395
00FA 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
00FD 74FF              MOV     A,#0FFH
00FF F0                MOVX    @DPTR,A
0100 A3                INC     DPTR
0101 7400        R     MOV     A,#HIGH ?SC_95
0103 F0                MOVX    @DPTR,A
0104 A3                INC     DPTR
0105 7400        R     MOV     A,#LOW ?SC_95
0107 F0                MOVX    @DPTR,A
0108 900000      E     MOV     DPTR,#N_IMU_Connected
010B E0                MOVX    A,@DPTR
010C FF                MOV     R7,A
010D 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
0110 E4                CLR     A
0111 F0                MOVX    @DPTR,A
0112 A3                INC     DPTR
0113 EF                MOV     A,R7
0114 F0                MOVX    @DPTR,A
0115 7B01              MOV     R3,#01H
0117 7A00        R     MOV     R2,#HIGH str
0119 7900        R     MOV     R1,#LOW str
011B 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 396
011E 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
0121 7401              MOV     A,#01H
0123 F0                MOVX    @DPTR,A
0124 A3                INC     DPTR
0125 7400        R     MOV     A,#HIGH str
0127 F0                MOVX    @DPTR,A
0128 A3                INC     DPTR
0129 7400        R     MOV     A,#LOW str
012B F0                MOVX    @DPTR,A
012C 900000      R     MOV     DPTR,#info_string
012F E0                MOVX    A,@DPTR
0130 FB                MOV     R3,A
0131 A3                INC     DPTR
0132 E0                MOVX    A,@DPTR
0133 FA                MOV     R2,A
0134 A3                INC     DPTR
0135 E0                MOVX    A,@DPTR
0136 F9                MOV     R1,A
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 42  

0137 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 398
013A 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
013D 74FF              MOV     A,#0FFH
013F F0                MOVX    @DPTR,A
0140 A3                INC     DPTR
0141 7400        R     MOV     A,#HIGH ?SC_28
0143 F0                MOVX    @DPTR,A
0144 A3                INC     DPTR
0145 7400        R     MOV     A,#LOW ?SC_28
0147 F0                MOVX    @DPTR,A
0148 900000      R     MOV     DPTR,#info_string
014B E0                MOVX    A,@DPTR
014C FB                MOV     R3,A
014D A3                INC     DPTR
014E E0                MOVX    A,@DPTR
014F FA                MOV     R2,A
0150 A3                INC     DPTR
0151 E0                MOVX    A,@DPTR
0152 F9                MOV     R1,A
0153 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 401
0156 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
0159 74FF              MOV     A,#0FFH
015B F0                MOVX    @DPTR,A
015C A3                INC     DPTR
015D 7400        R     MOV     A,#HIGH ?SC_115
015F F0                MOVX    @DPTR,A
0160 A3                INC     DPTR
0161 7400        R     MOV     A,#LOW ?SC_115
0163 F0                MOVX    @DPTR,A
0164 900000      R     MOV     DPTR,#info_string
0167 E0                MOVX    A,@DPTR
0168 FB                MOV     R3,A
0169 A3                INC     DPTR
016A E0                MOVX    A,@DPTR
016B FA                MOV     R2,A
016C A3                INC     DPTR
016D E0                MOVX    A,@DPTR
016E F9                MOV     R1,A
016F 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 402
0172 E4                CLR     A
0173 900000      R     MOV     DPTR,#i
0176 F0                MOVX    @DPTR,A
0177 A3                INC     DPTR
0178 F0                MOVX    @DPTR,A
0179         ?C0075:
0179 900000      E     MOV     DPTR,#N_IMU_Connected
017C E0                MOVX    A,@DPTR
017D FF                MOV     R7,A
017E C3                CLR     C
017F 900000      R     MOV     DPTR,#i+01H
0182 E0                MOVX    A,@DPTR
0183 9F                SUBB    A,R7
0184 7480              MOV     A,#080H
0186 F8                MOV     R0,A
0187 900000      R     MOV     DPTR,#i
018A E0                MOVX    A,@DPTR
018B 6480              XRL     A,#080H
018D 98                SUBB    A,R0
018E 4003              JC      $ + 5H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 43  

0190 020000      R     LJMP    ?C0076
                                           ; SOURCE LINE # 403
0193 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
0196 74FF              MOV     A,#0FFH
0198 F0                MOVX    @DPTR,A
0199 A3                INC     DPTR
019A 7400        R     MOV     A,#HIGH ?SC_136
019C F0                MOVX    @DPTR,A
019D A3                INC     DPTR
019E 7400        R     MOV     A,#LOW ?SC_136
01A0 F0                MOVX    @DPTR,A
01A1 900000      R     MOV     DPTR,#i
01A4 E0                MOVX    A,@DPTR
01A5 FE                MOV     R6,A
01A6 A3                INC     DPTR
01A7 E0                MOVX    A,@DPTR
01A8 FF                MOV     R7,A
01A9 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
01AC EE                MOV     A,R6
01AD F0                MOVX    @DPTR,A
01AE A3                INC     DPTR
01AF EF                MOV     A,R7
01B0 F0                MOVX    @DPTR,A
01B1 2400        E     ADD     A,#LOW IMU_connected
01B3 F582              MOV     DPL,A
01B5 7400        E     MOV     A,#HIGH IMU_connected
01B7 3E                ADDC    A,R6
01B8 F583              MOV     DPH,A
01BA E0                MOVX    A,@DPTR
01BB FF                MOV     R7,A
01BC 900000      E     MOV     DPTR,#?_sprintf?BYTE+08H
01BF E4                CLR     A
01C0 F0                MOVX    @DPTR,A
01C1 A3                INC     DPTR
01C2 EF                MOV     A,R7
01C3 F0                MOVX    @DPTR,A
01C4 7B01              MOV     R3,#01H
01C6 7A00        R     MOV     R2,#HIGH str
01C8 7900        R     MOV     R1,#LOW str
01CA 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 404
01CD 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
01D0 7401              MOV     A,#01H
01D2 F0                MOVX    @DPTR,A
01D3 A3                INC     DPTR
01D4 7400        R     MOV     A,#HIGH str
01D6 F0                MOVX    @DPTR,A
01D7 A3                INC     DPTR
01D8 7400        R     MOV     A,#LOW str
01DA F0                MOVX    @DPTR,A
01DB 900000      R     MOV     DPTR,#info_string
01DE E0                MOVX    A,@DPTR
01DF FB                MOV     R3,A
01E0 A3                INC     DPTR
01E1 E0                MOVX    A,@DPTR
01E2 FA                MOV     R2,A
01E3 A3                INC     DPTR
01E4 E0                MOVX    A,@DPTR
01E5 F9                MOV     R1,A
01E6 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 406
01E9 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 44  

01EC 74FF              MOV     A,#0FFH
01EE F0                MOVX    @DPTR,A
01EF A3                INC     DPTR
01F0 7400        R     MOV     A,#HIGH ?SC_155
01F2 F0                MOVX    @DPTR,A
01F3 A3                INC     DPTR
01F4 7400        R     MOV     A,#LOW ?SC_155
01F6 F0                MOVX    @DPTR,A
01F7 7B01              MOV     R3,#01H
01F9 7A00        R     MOV     R2,#HIGH str
01FB 7900        R     MOV     R1,#LOW str
01FD 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 407
0200 900000      R     MOV     DPTR,#i
0203 E0                MOVX    A,@DPTR
0204 FE                MOV     R6,A
0205 A3                INC     DPTR
0206 E0                MOVX    A,@DPTR
0207 2400        E     ADD     A,#LOW IMU_connected
0209 F582              MOV     DPL,A
020B 7400        E     MOV     A,#HIGH IMU_connected
020D 3E                ADDC    A,R6
020E F583              MOV     DPH,A
0210 E0                MOVX    A,@DPTR
0211 75F005            MOV     B,#05H
0214 A4                MUL     AB
0215 2400        E     ADD     A,#LOW IMU_conf
0217 F582              MOV     DPL,A
0219 E4                CLR     A
021A 3400        E     ADDC    A,#HIGH IMU_conf
021C F583              MOV     DPH,A
021E E0                MOVX    A,@DPTR
021F 6019              JZ      ?C0078
                                           ; SOURCE LINE # 408
0221 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
0224 74FF              MOV     A,#0FFH
0226 F0                MOVX    @DPTR,A
0227 A3                INC     DPTR
0228 7400        R     MOV     A,#HIGH ?SC_173
022A F0                MOVX    @DPTR,A
022B A3                INC     DPTR
022C 7400        R     MOV     A,#LOW ?SC_173
022E F0                MOVX    @DPTR,A
022F 7B01              MOV     R3,#01H
0231 7A00        R     MOV     R2,#HIGH str
0233 7900        R     MOV     R1,#LOW str
0235 120000      E     LCALL   _strcat
0238 8017              SJMP    ?C0079
023A         ?C0078:
                                           ; SOURCE LINE # 410
023A 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
023D 74FF              MOV     A,#0FFH
023F F0                MOVX    @DPTR,A
0240 A3                INC     DPTR
0241 7400        R     MOV     A,#HIGH ?SC_179
0243 F0                MOVX    @DPTR,A
0244 A3                INC     DPTR
0245 7400        R     MOV     A,#LOW ?SC_179
0247 F0                MOVX    @DPTR,A
0248 7B01              MOV     R3,#01H
024A 7A00        R     MOV     R2,#HIGH str
024C 7900        R     MOV     R1,#LOW str
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 45  

024E 120000      E     LCALL   _strcat
0251         ?C0079:
                                           ; SOURCE LINE # 411
0251 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
0254 74FF              MOV     A,#0FFH
0256 F0                MOVX    @DPTR,A
0257 A3                INC     DPTR
0258 7400        R     MOV     A,#HIGH ?SC_184
025A F0                MOVX    @DPTR,A
025B A3                INC     DPTR
025C 7400        R     MOV     A,#LOW ?SC_184
025E F0                MOVX    @DPTR,A
025F 7B01              MOV     R3,#01H
0261 7A00        R     MOV     R2,#HIGH str
0263 7900        R     MOV     R1,#LOW str
0265 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 412
0268 900000      R     MOV     DPTR,#i
026B E0                MOVX    A,@DPTR
026C FE                MOV     R6,A
026D A3                INC     DPTR
026E E0                MOVX    A,@DPTR
026F 2400        E     ADD     A,#LOW IMU_connected
0271 F582              MOV     DPL,A
0273 7400        E     MOV     A,#HIGH IMU_connected
0275 3E                ADDC    A,R6
0276 F583              MOV     DPH,A
0278 E0                MOVX    A,@DPTR
0279 75F005            MOV     B,#05H
027C A4                MUL     AB
027D 2400        E     ADD     A,#LOW IMU_conf+01H
027F F582              MOV     DPL,A
0281 E4                CLR     A
0282 3400        E     ADDC    A,#HIGH IMU_conf+01H
0284 F583              MOV     DPH,A
0286 E0                MOVX    A,@DPTR
0287 6019              JZ      ?C0080
                                           ; SOURCE LINE # 413
0289 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
028C 74FF              MOV     A,#0FFH
028E F0                MOVX    @DPTR,A
028F A3                INC     DPTR
0290 7400        R     MOV     A,#HIGH ?SC_173
0292 F0                MOVX    @DPTR,A
0293 A3                INC     DPTR
0294 7400        R     MOV     A,#LOW ?SC_173
0296 F0                MOVX    @DPTR,A
0297 7B01              MOV     R3,#01H
0299 7A00        R     MOV     R2,#HIGH str
029B 7900        R     MOV     R1,#LOW str
029D 120000      E     LCALL   _strcat
02A0 8017              SJMP    ?C0081
02A2         ?C0080:
                                           ; SOURCE LINE # 415
02A2 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
02A5 74FF              MOV     A,#0FFH
02A7 F0                MOVX    @DPTR,A
02A8 A3                INC     DPTR
02A9 7400        R     MOV     A,#HIGH ?SC_179
02AB F0                MOVX    @DPTR,A
02AC A3                INC     DPTR
02AD 7400        R     MOV     A,#LOW ?SC_179
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 46  

02AF F0                MOVX    @DPTR,A
02B0 7B01              MOV     R3,#01H
02B2 7A00        R     MOV     R2,#HIGH str
02B4 7900        R     MOV     R1,#LOW str
02B6 120000      E     LCALL   _strcat
02B9         ?C0081:
                                           ; SOURCE LINE # 416
02B9 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
02BC 74FF              MOV     A,#0FFH
02BE F0                MOVX    @DPTR,A
02BF A3                INC     DPTR
02C0 7400        R     MOV     A,#HIGH ?SC_198
02C2 F0                MOVX    @DPTR,A
02C3 A3                INC     DPTR
02C4 7400        R     MOV     A,#LOW ?SC_198
02C6 F0                MOVX    @DPTR,A
02C7 7B01              MOV     R3,#01H
02C9 7A00        R     MOV     R2,#HIGH str
02CB 7900        R     MOV     R1,#LOW str
02CD 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 417
02D0 900000      R     MOV     DPTR,#i
02D3 E0                MOVX    A,@DPTR
02D4 FE                MOV     R6,A
02D5 A3                INC     DPTR
02D6 E0                MOVX    A,@DPTR
02D7 2400        E     ADD     A,#LOW IMU_connected
02D9 F582              MOV     DPL,A
02DB 7400        E     MOV     A,#HIGH IMU_connected
02DD 3E                ADDC    A,R6
02DE F583              MOV     DPH,A
02E0 E0                MOVX    A,@DPTR
02E1 75F005            MOV     B,#05H
02E4 A4                MUL     AB
02E5 2400        E     ADD     A,#LOW IMU_conf+02H
02E7 F582              MOV     DPL,A
02E9 E4                CLR     A
02EA 3400        E     ADDC    A,#HIGH IMU_conf+02H
02EC F583              MOV     DPH,A
02EE E0                MOVX    A,@DPTR
02EF 6019              JZ      ?C0082
                                           ; SOURCE LINE # 418
02F1 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
02F4 74FF              MOV     A,#0FFH
02F6 F0                MOVX    @DPTR,A
02F7 A3                INC     DPTR
02F8 7400        R     MOV     A,#HIGH ?SC_173
02FA F0                MOVX    @DPTR,A
02FB A3                INC     DPTR
02FC 7400        R     MOV     A,#LOW ?SC_173
02FE F0                MOVX    @DPTR,A
02FF 7B01              MOV     R3,#01H
0301 7A00        R     MOV     R2,#HIGH str
0303 7900        R     MOV     R1,#LOW str
0305 120000      E     LCALL   _strcat
0308 8017              SJMP    ?C0083
030A         ?C0082:
                                           ; SOURCE LINE # 420
030A 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
030D 74FF              MOV     A,#0FFH
030F F0                MOVX    @DPTR,A
0310 A3                INC     DPTR
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 47  

0311 7400        R     MOV     A,#HIGH ?SC_179
0313 F0                MOVX    @DPTR,A
0314 A3                INC     DPTR
0315 7400        R     MOV     A,#LOW ?SC_179
0317 F0                MOVX    @DPTR,A
0318 7B01              MOV     R3,#01H
031A 7A00        R     MOV     R2,#HIGH str
031C 7900        R     MOV     R1,#LOW str
031E 120000      E     LCALL   _strcat
0321         ?C0083:
                                           ; SOURCE LINE # 421
0321 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
0324 74FF              MOV     A,#0FFH
0326 F0                MOVX    @DPTR,A
0327 A3                INC     DPTR
0328 7400        R     MOV     A,#HIGH ?SC_215
032A F0                MOVX    @DPTR,A
032B A3                INC     DPTR
032C 7400        R     MOV     A,#LOW ?SC_215
032E F0                MOVX    @DPTR,A
032F 7B01              MOV     R3,#01H
0331 7A00        R     MOV     R2,#HIGH str
0333 7900        R     MOV     R1,#LOW str
0335 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 422
0338 900000      R     MOV     DPTR,#i
033B E0                MOVX    A,@DPTR
033C FE                MOV     R6,A
033D A3                INC     DPTR
033E E0                MOVX    A,@DPTR
033F 2400        E     ADD     A,#LOW IMU_connected
0341 F582              MOV     DPL,A
0343 7400        E     MOV     A,#HIGH IMU_connected
0345 3E                ADDC    A,R6
0346 F583              MOV     DPH,A
0348 E0                MOVX    A,@DPTR
0349 75F005            MOV     B,#05H
034C A4                MUL     AB
034D 2400        E     ADD     A,#LOW IMU_conf+03H
034F F582              MOV     DPL,A
0351 E4                CLR     A
0352 3400        E     ADDC    A,#HIGH IMU_conf+03H
0354 F583              MOV     DPH,A
0356 E0                MOVX    A,@DPTR
0357 6019              JZ      ?C0084
                                           ; SOURCE LINE # 423
0359 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
035C 74FF              MOV     A,#0FFH
035E F0                MOVX    @DPTR,A
035F A3                INC     DPTR
0360 7400        R     MOV     A,#HIGH ?SC_173
0362 F0                MOVX    @DPTR,A
0363 A3                INC     DPTR
0364 7400        R     MOV     A,#LOW ?SC_173
0366 F0                MOVX    @DPTR,A
0367 7B01              MOV     R3,#01H
0369 7A00        R     MOV     R2,#HIGH str
036B 7900        R     MOV     R1,#LOW str
036D 120000      E     LCALL   _strcat
0370 8017              SJMP    ?C0085
0372         ?C0084:
                                           ; SOURCE LINE # 425
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 48  

0372 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
0375 74FF              MOV     A,#0FFH
0377 F0                MOVX    @DPTR,A
0378 A3                INC     DPTR
0379 7400        R     MOV     A,#HIGH ?SC_179
037B F0                MOVX    @DPTR,A
037C A3                INC     DPTR
037D 7400        R     MOV     A,#LOW ?SC_179
037F F0                MOVX    @DPTR,A
0380 7B01              MOV     R3,#01H
0382 7A00        R     MOV     R2,#HIGH str
0384 7900        R     MOV     R1,#LOW str
0386 120000      E     LCALL   _strcat
0389         ?C0085:
                                           ; SOURCE LINE # 426
0389 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
038C 74FF              MOV     A,#0FFH
038E F0                MOVX    @DPTR,A
038F A3                INC     DPTR
0390 7400        R     MOV     A,#HIGH ?SC_229
0392 F0                MOVX    @DPTR,A
0393 A3                INC     DPTR
0394 7400        R     MOV     A,#LOW ?SC_229
0396 F0                MOVX    @DPTR,A
0397 7B01              MOV     R3,#01H
0399 7A00        R     MOV     R2,#HIGH str
039B 7900        R     MOV     R1,#LOW str
039D 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 427
03A0 900000      R     MOV     DPTR,#i
03A3 E0                MOVX    A,@DPTR
03A4 FE                MOV     R6,A
03A5 A3                INC     DPTR
03A6 E0                MOVX    A,@DPTR
03A7 2400        E     ADD     A,#LOW IMU_connected
03A9 F582              MOV     DPL,A
03AB 7400        E     MOV     A,#HIGH IMU_connected
03AD 3E                ADDC    A,R6
03AE F583              MOV     DPH,A
03B0 E0                MOVX    A,@DPTR
03B1 75F005            MOV     B,#05H
03B4 A4                MUL     AB
03B5 2400        E     ADD     A,#LOW IMU_conf+04H
03B7 F582              MOV     DPL,A
03B9 E4                CLR     A
03BA 3400        E     ADDC    A,#HIGH IMU_conf+04H
03BC F583              MOV     DPH,A
03BE E0                MOVX    A,@DPTR
03BF 6019              JZ      ?C0086
                                           ; SOURCE LINE # 428
03C1 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
03C4 74FF              MOV     A,#0FFH
03C6 F0                MOVX    @DPTR,A
03C7 A3                INC     DPTR
03C8 7400        R     MOV     A,#HIGH ?SC_173
03CA F0                MOVX    @DPTR,A
03CB A3                INC     DPTR
03CC 7400        R     MOV     A,#LOW ?SC_173
03CE F0                MOVX    @DPTR,A
03CF 7B01              MOV     R3,#01H
03D1 7A00        R     MOV     R2,#HIGH str
03D3 7900        R     MOV     R1,#LOW str
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 49  

03D5 120000      E     LCALL   _strcat
03D8 8017              SJMP    ?C0087
03DA         ?C0086:
                                           ; SOURCE LINE # 430
03DA 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
03DD 74FF              MOV     A,#0FFH
03DF F0                MOVX    @DPTR,A
03E0 A3                INC     DPTR
03E1 7400        R     MOV     A,#HIGH ?SC_179
03E3 F0                MOVX    @DPTR,A
03E4 A3                INC     DPTR
03E5 7400        R     MOV     A,#LOW ?SC_179
03E7 F0                MOVX    @DPTR,A
03E8 7B01              MOV     R3,#01H
03EA 7A00        R     MOV     R2,#HIGH str
03EC 7900        R     MOV     R1,#LOW str
03EE 120000      E     LCALL   _strcat
03F1         ?C0087:
                                           ; SOURCE LINE # 432
03F1 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
03F4 7401              MOV     A,#01H
03F6 F0                MOVX    @DPTR,A
03F7 A3                INC     DPTR
03F8 7400        R     MOV     A,#HIGH str
03FA F0                MOVX    @DPTR,A
03FB A3                INC     DPTR
03FC 7400        R     MOV     A,#LOW str
03FE F0                MOVX    @DPTR,A
03FF 900000      R     MOV     DPTR,#info_string
0402 E0                MOVX    A,@DPTR
0403 FB                MOV     R3,A
0404 A3                INC     DPTR
0405 E0                MOVX    A,@DPTR
0406 FA                MOV     R2,A
0407 A3                INC     DPTR
0408 E0                MOVX    A,@DPTR
0409 F9                MOV     R1,A
040A 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 433
040D 900000      R     MOV     DPTR,#i+01H
0410 E0                MOVX    A,@DPTR
0411 04                INC     A
0412 F0                MOVX    @DPTR,A
0413 7006              JNZ     ?C0168
0415 900000      R     MOV     DPTR,#i
0418 E0                MOVX    A,@DPTR
0419 04                INC     A
041A F0                MOVX    @DPTR,A
041B         ?C0168:
041B 020000      R     LJMP    ?C0075
041E         ?C0076:
                                           ; SOURCE LINE # 435
041E 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
0421 74FF              MOV     A,#0FFH
0423 F0                MOVX    @DPTR,A
0424 A3                INC     DPTR
0425 7400        R     MOV     A,#HIGH ?SC_28
0427 F0                MOVX    @DPTR,A
0428 A3                INC     DPTR
0429 7400        R     MOV     A,#LOW ?SC_28
042B F0                MOVX    @DPTR,A
042C 900000      R     MOV     DPTR,#info_string
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 50  

042F E0                MOVX    A,@DPTR
0430 FB                MOV     R3,A
0431 A3                INC     DPTR
0432 E0                MOVX    A,@DPTR
0433 FA                MOV     R2,A
0434 A3                INC     DPTR
0435 E0                MOVX    A,@DPTR
0436 F9                MOV     R1,A
0437 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 437
043A 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
043D 74FF              MOV     A,#0FFH
043F F0                MOVX    @DPTR,A
0440 A3                INC     DPTR
0441 7400        R     MOV     A,#HIGH ?SC_244
0443 F0                MOVX    @DPTR,A
0444 A3                INC     DPTR
0445 7400        R     MOV     A,#LOW ?SC_244
0447 F0                MOVX    @DPTR,A
0448 900000      R     MOV     DPTR,#info_string
044B E0                MOVX    A,@DPTR
044C FB                MOV     R3,A
044D A3                INC     DPTR
044E E0                MOVX    A,@DPTR
044F FA                MOV     R2,A
0450 A3                INC     DPTR
0451 E0                MOVX    A,@DPTR
0452 F9                MOV     R1,A
0453 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 438
0456 E4                CLR     A
0457 900000      R     MOV     DPTR,#i
045A F0                MOVX    @DPTR,A
045B A3                INC     DPTR
045C F0                MOVX    @DPTR,A
045D         ?C0088:
045D 900000      E     MOV     DPTR,#N_IMU_Connected
0460 E0                MOVX    A,@DPTR
0461 FF                MOV     R7,A
0462 C3                CLR     C
0463 900000      R     MOV     DPTR,#i+01H
0466 E0                MOVX    A,@DPTR
0467 9F                SUBB    A,R7
0468 7480              MOV     A,#080H
046A F8                MOV     R0,A
046B 900000      R     MOV     DPTR,#i
046E E0                MOVX    A,@DPTR
046F 6480              XRL     A,#080H
0471 98                SUBB    A,R0
0472 4003              JC      $ + 5H
0474 020000      R     LJMP    ?C0089
                                           ; SOURCE LINE # 439
0477 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
047A 74FF              MOV     A,#0FFH
047C F0                MOVX    @DPTR,A
047D A3                INC     DPTR
047E 7400        R     MOV     A,#HIGH ?SC_136
0480 F0                MOVX    @DPTR,A
0481 A3                INC     DPTR
0482 7400        R     MOV     A,#LOW ?SC_136
0484 F0                MOVX    @DPTR,A
0485 900000      R     MOV     DPTR,#i
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 51  

0488 E0                MOVX    A,@DPTR
0489 FE                MOV     R6,A
048A A3                INC     DPTR
048B E0                MOVX    A,@DPTR
048C FF                MOV     R7,A
048D 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
0490 EE                MOV     A,R6
0491 F0                MOVX    @DPTR,A
0492 A3                INC     DPTR
0493 EF                MOV     A,R7
0494 F0                MOVX    @DPTR,A
0495 2400        E     ADD     A,#LOW IMU_connected
0497 F582              MOV     DPL,A
0499 7400        E     MOV     A,#HIGH IMU_connected
049B 3E                ADDC    A,R6
049C F583              MOV     DPH,A
049E E0                MOVX    A,@DPTR
049F FF                MOV     R7,A
04A0 900000      E     MOV     DPTR,#?_sprintf?BYTE+08H
04A3 E4                CLR     A
04A4 F0                MOVX    @DPTR,A
04A5 A3                INC     DPTR
04A6 EF                MOV     A,R7
04A7 F0                MOVX    @DPTR,A
04A8 7B01              MOV     R3,#01H
04AA 7A00        R     MOV     R2,#HIGH str
04AC 7900        R     MOV     R1,#LOW str
04AE 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 440
04B1 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
04B4 7401              MOV     A,#01H
04B6 F0                MOVX    @DPTR,A
04B7 A3                INC     DPTR
04B8 7400        R     MOV     A,#HIGH str
04BA F0                MOVX    @DPTR,A
04BB A3                INC     DPTR
04BC 7400        R     MOV     A,#LOW str
04BE F0                MOVX    @DPTR,A
04BF 900000      R     MOV     DPTR,#info_string
04C2 E0                MOVX    A,@DPTR
04C3 FB                MOV     R3,A
04C4 A3                INC     DPTR
04C5 E0                MOVX    A,@DPTR
04C6 FA                MOV     R2,A
04C7 A3                INC     DPTR
04C8 E0                MOVX    A,@DPTR
04C9 F9                MOV     R1,A
04CA 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 442
04CD 900000      R     MOV     DPTR,#i
04D0 E0                MOVX    A,@DPTR
04D1 FE                MOV     R6,A
04D2 A3                INC     DPTR
04D3 E0                MOVX    A,@DPTR
04D4 FF                MOV     R7,A
04D5 2400        E     ADD     A,#LOW IMU_connected
04D7 F582              MOV     DPL,A
04D9 7400        E     MOV     A,#HIGH IMU_connected
04DB 3E                ADDC    A,R6
04DC F583              MOV     DPH,A
04DE E0                MOVX    A,@DPTR
04DF 75F005            MOV     B,#05H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 52  

04E2 A4                MUL     AB
04E3 2400        E     ADD     A,#LOW IMU_conf
04E5 F582              MOV     DPL,A
04E7 E4                CLR     A
04E8 3400        E     ADDC    A,#HIGH IMU_conf
04EA F583              MOV     DPH,A
04EC E0                MOVX    A,@DPTR
04ED 7003              JNZ     $ + 5H
04EF 020000      R     LJMP    ?C0091
                                           ; SOURCE LINE # 443
04F2 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
04F5 74FF              MOV     A,#0FFH
04F7 F0                MOVX    @DPTR,A
04F8 A3                INC     DPTR
04F9 7400        R     MOV     A,#HIGH ?SC_259
04FB F0                MOVX    @DPTR,A
04FC A3                INC     DPTR
04FD 7400        R     MOV     A,#LOW ?SC_259
04FF F0                MOVX    @DPTR,A
0500 900000      E     MOV     DPTR,#g_imu+01H
0503 75F015            MOV     B,#015H
0506 EF                MOV     A,R7
0507 120000      E     LCALL   ?C?OFFXADD
050A EE                MOV     A,R6
050B 75F015            MOV     B,#015H
050E A4                MUL     AB
050F 2583              ADD     A,DPH
0511 F583              MOV     DPH,A
0513 E0                MOVX    A,@DPTR
0514 FD                MOV     R5,A
0515 A3                INC     DPTR
0516 E0                MOVX    A,@DPTR
0517 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
051A CD                XCH     A,R5
051B F0                MOVX    @DPTR,A
051C A3                INC     DPTR
051D ED                MOV     A,R5
051E F0                MOVX    @DPTR,A
051F 900000      E     MOV     DPTR,#g_imu+03H
0522 75F015            MOV     B,#015H
0525 EF                MOV     A,R7
0526 120000      E     LCALL   ?C?OFFXADD
0529 EE                MOV     A,R6
052A 75F015            MOV     B,#015H
052D A4                MUL     AB
052E 2583              ADD     A,DPH
0530 F583              MOV     DPH,A
0532 E0                MOVX    A,@DPTR
0533 FF                MOV     R7,A
0534 A3                INC     DPTR
0535 E0                MOVX    A,@DPTR
0536 900000      E     MOV     DPTR,#?_sprintf?BYTE+08H
0539 CF                XCH     A,R7
053A F0                MOVX    @DPTR,A
053B A3                INC     DPTR
053C EF                MOV     A,R7
053D F0                MOVX    @DPTR,A
053E 900000      R     MOV     DPTR,#i
0541 E0                MOVX    A,@DPTR
0542 A3                INC     DPTR
0543 E0                MOVX    A,@DPTR
0544 900000      E     MOV     DPTR,#g_imu+05H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 53  

0547 75F015            MOV     B,#015H
054A 120000      E     LCALL   ?C?OFFXADD
054D EE                MOV     A,R6
054E 75F015            MOV     B,#015H
0551 A4                MUL     AB
0552 2583              ADD     A,DPH
0554 F583              MOV     DPH,A
0556 E0                MOVX    A,@DPTR
0557 FF                MOV     R7,A
0558 A3                INC     DPTR
0559 E0                MOVX    A,@DPTR
055A 900000      E     MOV     DPTR,#?_sprintf?BYTE+0AH
055D CF                XCH     A,R7
055E F0                MOVX    @DPTR,A
055F A3                INC     DPTR
0560 EF                MOV     A,R7
0561 F0                MOVX    @DPTR,A
0562 7B01              MOV     R3,#01H
0564 7A00        R     MOV     R2,#HIGH str
0566 7900        R     MOV     R1,#LOW str
0568 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 444
056B 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
056E 7401              MOV     A,#01H
0570 F0                MOVX    @DPTR,A
0571 A3                INC     DPTR
0572 7400        R     MOV     A,#HIGH str
0574 F0                MOVX    @DPTR,A
0575 A3                INC     DPTR
0576 7400        R     MOV     A,#LOW str
0578 F0                MOVX    @DPTR,A
0579 900000      R     MOV     DPTR,#info_string
057C E0                MOVX    A,@DPTR
057D FB                MOV     R3,A
057E A3                INC     DPTR
057F E0                MOVX    A,@DPTR
0580 FA                MOV     R2,A
0581 A3                INC     DPTR
0582 E0                MOVX    A,@DPTR
0583 F9                MOV     R1,A
0584 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 445
0587         ?C0091:
                                           ; SOURCE LINE # 447
0587 900000      R     MOV     DPTR,#i
058A E0                MOVX    A,@DPTR
058B FE                MOV     R6,A
058C A3                INC     DPTR
058D E0                MOVX    A,@DPTR
058E FF                MOV     R7,A
058F 2400        E     ADD     A,#LOW IMU_connected
0591 F582              MOV     DPL,A
0593 7400        E     MOV     A,#HIGH IMU_connected
0595 3E                ADDC    A,R6
0596 F583              MOV     DPH,A
0598 E0                MOVX    A,@DPTR
0599 75F005            MOV     B,#05H
059C A4                MUL     AB
059D 2400        E     ADD     A,#LOW IMU_conf+01H
059F F582              MOV     DPL,A
05A1 E4                CLR     A
05A2 3400        E     ADDC    A,#HIGH IMU_conf+01H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 54  

05A4 F583              MOV     DPH,A
05A6 E0                MOVX    A,@DPTR
05A7 7003              JNZ     $ + 5H
05A9 020000      R     LJMP    ?C0092
                                           ; SOURCE LINE # 448
05AC 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
05AF 74FF              MOV     A,#0FFH
05B1 F0                MOVX    @DPTR,A
05B2 A3                INC     DPTR
05B3 7400        R     MOV     A,#HIGH ?SC_276
05B5 F0                MOVX    @DPTR,A
05B6 A3                INC     DPTR
05B7 7400        R     MOV     A,#LOW ?SC_276
05B9 F0                MOVX    @DPTR,A
05BA 900000      E     MOV     DPTR,#g_imu+07H
05BD 75F015            MOV     B,#015H
05C0 EF                MOV     A,R7
05C1 120000      E     LCALL   ?C?OFFXADD
05C4 EE                MOV     A,R6
05C5 75F015            MOV     B,#015H
05C8 A4                MUL     AB
05C9 2583              ADD     A,DPH
05CB F583              MOV     DPH,A
05CD E0                MOVX    A,@DPTR
05CE FD                MOV     R5,A
05CF A3                INC     DPTR
05D0 E0                MOVX    A,@DPTR
05D1 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
05D4 CD                XCH     A,R5
05D5 F0                MOVX    @DPTR,A
05D6 A3                INC     DPTR
05D7 ED                MOV     A,R5
05D8 F0                MOVX    @DPTR,A
05D9 900000      E     MOV     DPTR,#g_imu+09H
05DC 75F015            MOV     B,#015H
05DF EF                MOV     A,R7
05E0 120000      E     LCALL   ?C?OFFXADD
05E3 EE                MOV     A,R6
05E4 75F015            MOV     B,#015H
05E7 A4                MUL     AB
05E8 2583              ADD     A,DPH
05EA F583              MOV     DPH,A
05EC E0                MOVX    A,@DPTR
05ED FF                MOV     R7,A
05EE A3                INC     DPTR
05EF E0                MOVX    A,@DPTR
05F0 900000      E     MOV     DPTR,#?_sprintf?BYTE+08H
05F3 CF                XCH     A,R7
05F4 F0                MOVX    @DPTR,A
05F5 A3                INC     DPTR
05F6 EF                MOV     A,R7
05F7 F0                MOVX    @DPTR,A
05F8 900000      R     MOV     DPTR,#i
05FB E0                MOVX    A,@DPTR
05FC A3                INC     DPTR
05FD E0                MOVX    A,@DPTR
05FE 900000      E     MOV     DPTR,#g_imu+0BH
0601 75F015            MOV     B,#015H
0604 120000      E     LCALL   ?C?OFFXADD
0607 EE                MOV     A,R6
0608 75F015            MOV     B,#015H
060B A4                MUL     AB
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 55  

060C 2583              ADD     A,DPH
060E F583              MOV     DPH,A
0610 E0                MOVX    A,@DPTR
0611 FF                MOV     R7,A
0612 A3                INC     DPTR
0613 E0                MOVX    A,@DPTR
0614 900000      E     MOV     DPTR,#?_sprintf?BYTE+0AH
0617 CF                XCH     A,R7
0618 F0                MOVX    @DPTR,A
0619 A3                INC     DPTR
061A EF                MOV     A,R7
061B F0                MOVX    @DPTR,A
061C 7B01              MOV     R3,#01H
061E 7A00        R     MOV     R2,#HIGH str
0620 7900        R     MOV     R1,#LOW str
0622 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 449
0625 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
0628 7401              MOV     A,#01H
062A F0                MOVX    @DPTR,A
062B A3                INC     DPTR
062C 7400        R     MOV     A,#HIGH str
062E F0                MOVX    @DPTR,A
062F A3                INC     DPTR
0630 7400        R     MOV     A,#LOW str
0632 F0                MOVX    @DPTR,A
0633 900000      R     MOV     DPTR,#info_string
0636 E0                MOVX    A,@DPTR
0637 FB                MOV     R3,A
0638 A3                INC     DPTR
0639 E0                MOVX    A,@DPTR
063A FA                MOV     R2,A
063B A3                INC     DPTR
063C E0                MOVX    A,@DPTR
063D F9                MOV     R1,A
063E 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 450
0641         ?C0092:
                                           ; SOURCE LINE # 452
0641 900000      R     MOV     DPTR,#i
0644 E0                MOVX    A,@DPTR
0645 FE                MOV     R6,A
0646 A3                INC     DPTR
0647 E0                MOVX    A,@DPTR
0648 FF                MOV     R7,A
0649 2400        E     ADD     A,#LOW IMU_connected
064B F582              MOV     DPL,A
064D 7400        E     MOV     A,#HIGH IMU_connected
064F 3E                ADDC    A,R6
0650 F583              MOV     DPH,A
0652 E0                MOVX    A,@DPTR
0653 75F005            MOV     B,#05H
0656 A4                MUL     AB
0657 2400        E     ADD     A,#LOW IMU_conf+02H
0659 F582              MOV     DPL,A
065B E4                CLR     A
065C 3400        E     ADDC    A,#HIGH IMU_conf+02H
065E F583              MOV     DPH,A
0660 E0                MOVX    A,@DPTR
0661 7003              JNZ     $ + 5H
0663 020000      R     LJMP    ?C0093
                                           ; SOURCE LINE # 453
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 56  

0666 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
0669 74FF              MOV     A,#0FFH
066B F0                MOVX    @DPTR,A
066C A3                INC     DPTR
066D 7400        R     MOV     A,#HIGH ?SC_294
066F F0                MOVX    @DPTR,A
0670 A3                INC     DPTR
0671 7400        R     MOV     A,#LOW ?SC_294
0673 F0                MOVX    @DPTR,A
0674 900000      E     MOV     DPTR,#g_imu+0DH
0677 75F015            MOV     B,#015H
067A EF                MOV     A,R7
067B 120000      E     LCALL   ?C?OFFXADD
067E EE                MOV     A,R6
067F 75F015            MOV     B,#015H
0682 A4                MUL     AB
0683 2583              ADD     A,DPH
0685 F583              MOV     DPH,A
0687 E0                MOVX    A,@DPTR
0688 FD                MOV     R5,A
0689 A3                INC     DPTR
068A E0                MOVX    A,@DPTR
068B 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
068E CD                XCH     A,R5
068F F0                MOVX    @DPTR,A
0690 A3                INC     DPTR
0691 ED                MOV     A,R5
0692 F0                MOVX    @DPTR,A
0693 900000      E     MOV     DPTR,#g_imu+0FH
0696 75F015            MOV     B,#015H
0699 EF                MOV     A,R7
069A 120000      E     LCALL   ?C?OFFXADD
069D EE                MOV     A,R6
069E 75F015            MOV     B,#015H
06A1 A4                MUL     AB
06A2 2583              ADD     A,DPH
06A4 F583              MOV     DPH,A
06A6 E0                MOVX    A,@DPTR
06A7 FF                MOV     R7,A
06A8 A3                INC     DPTR
06A9 E0                MOVX    A,@DPTR
06AA 900000      E     MOV     DPTR,#?_sprintf?BYTE+08H
06AD CF                XCH     A,R7
06AE F0                MOVX    @DPTR,A
06AF A3                INC     DPTR
06B0 EF                MOV     A,R7
06B1 F0                MOVX    @DPTR,A
06B2 900000      R     MOV     DPTR,#i
06B5 E0                MOVX    A,@DPTR
06B6 A3                INC     DPTR
06B7 E0                MOVX    A,@DPTR
06B8 900000      E     MOV     DPTR,#g_imu+011H
06BB 75F015            MOV     B,#015H
06BE 120000      E     LCALL   ?C?OFFXADD
06C1 EE                MOV     A,R6
06C2 75F015            MOV     B,#015H
06C5 A4                MUL     AB
06C6 2583              ADD     A,DPH
06C8 F583              MOV     DPH,A
06CA E0                MOVX    A,@DPTR
06CB FF                MOV     R7,A
06CC A3                INC     DPTR
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 57  

06CD E0                MOVX    A,@DPTR
06CE 900000      E     MOV     DPTR,#?_sprintf?BYTE+0AH
06D1 CF                XCH     A,R7
06D2 F0                MOVX    @DPTR,A
06D3 A3                INC     DPTR
06D4 EF                MOV     A,R7
06D5 F0                MOVX    @DPTR,A
06D6 7B01              MOV     R3,#01H
06D8 7A00        R     MOV     R2,#HIGH str
06DA 7900        R     MOV     R1,#LOW str
06DC 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 454
06DF 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
06E2 7401              MOV     A,#01H
06E4 F0                MOVX    @DPTR,A
06E5 A3                INC     DPTR
06E6 7400        R     MOV     A,#HIGH str
06E8 F0                MOVX    @DPTR,A
06E9 A3                INC     DPTR
06EA 7400        R     MOV     A,#LOW str
06EC F0                MOVX    @DPTR,A
06ED 900000      R     MOV     DPTR,#info_string
06F0 E0                MOVX    A,@DPTR
06F1 FB                MOV     R3,A
06F2 A3                INC     DPTR
06F3 E0                MOVX    A,@DPTR
06F4 FA                MOV     R2,A
06F5 A3                INC     DPTR
06F6 E0                MOVX    A,@DPTR
06F7 F9                MOV     R1,A
06F8 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 455
06FB         ?C0093:
                                           ; SOURCE LINE # 457
06FB 900000      R     MOV     DPTR,#i
06FE E0                MOVX    A,@DPTR
06FF FE                MOV     R6,A
0700 A3                INC     DPTR
0701 E0                MOVX    A,@DPTR
0702 FF                MOV     R7,A
0703 2400        E     ADD     A,#LOW IMU_connected
0705 F582              MOV     DPL,A
0707 7400        E     MOV     A,#HIGH IMU_connected
0709 3E                ADDC    A,R6
070A F583              MOV     DPH,A
070C E0                MOVX    A,@DPTR
070D 75F005            MOV     B,#05H
0710 A4                MUL     AB
0711 2400        E     ADD     A,#LOW IMU_conf+04H
0713 F582              MOV     DPL,A
0715 E4                CLR     A
0716 3400        E     ADDC    A,#HIGH IMU_conf+04H
0718 F583              MOV     DPH,A
071A E0                MOVX    A,@DPTR
071B 6052              JZ      ?C0090
                                           ; SOURCE LINE # 458
071D 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
0720 74FF              MOV     A,#0FFH
0722 F0                MOVX    @DPTR,A
0723 A3                INC     DPTR
0724 7400        R     MOV     A,#HIGH ?SC_311
0726 F0                MOVX    @DPTR,A
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 58  

0727 A3                INC     DPTR
0728 7400        R     MOV     A,#LOW ?SC_311
072A F0                MOVX    @DPTR,A
072B 900000      E     MOV     DPTR,#g_imu+013H
072E 75F015            MOV     B,#015H
0731 EF                MOV     A,R7
0732 120000      E     LCALL   ?C?OFFXADD
0735 EE                MOV     A,R6
0736 75F015            MOV     B,#015H
0739 A4                MUL     AB
073A 2583              ADD     A,DPH
073C F583              MOV     DPH,A
073E E0                MOVX    A,@DPTR
073F FF                MOV     R7,A
0740 A3                INC     DPTR
0741 E0                MOVX    A,@DPTR
0742 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
0745 CF                XCH     A,R7
0746 F0                MOVX    @DPTR,A
0747 A3                INC     DPTR
0748 EF                MOV     A,R7
0749 F0                MOVX    @DPTR,A
074A 7B01              MOV     R3,#01H
074C 7A00        R     MOV     R2,#HIGH str
074E 7900        R     MOV     R1,#LOW str
0750 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 459
0753 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
0756 7401              MOV     A,#01H
0758 F0                MOVX    @DPTR,A
0759 A3                INC     DPTR
075A 7400        R     MOV     A,#HIGH str
075C F0                MOVX    @DPTR,A
075D A3                INC     DPTR
075E 7400        R     MOV     A,#LOW str
0760 F0                MOVX    @DPTR,A
0761 900000      R     MOV     DPTR,#info_string
0764 E0                MOVX    A,@DPTR
0765 FB                MOV     R3,A
0766 A3                INC     DPTR
0767 E0                MOVX    A,@DPTR
0768 FA                MOV     R2,A
0769 A3                INC     DPTR
076A E0                MOVX    A,@DPTR
076B F9                MOV     R1,A
076C 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 460
                                           ; SOURCE LINE # 462
076F         ?C0090:
076F 900000      R     MOV     DPTR,#i+01H
0772 E0                MOVX    A,@DPTR
0773 04                INC     A
0774 F0                MOVX    @DPTR,A
0775 7006              JNZ     ?C0169
0777 900000      R     MOV     DPTR,#i
077A E0                MOVX    A,@DPTR
077B 04                INC     A
077C F0                MOVX    @DPTR,A
077D         ?C0169:
077D 020000      R     LJMP    ?C0088
0780         ?C0089:
                                           ; SOURCE LINE # 464
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 59  

0780 900000      E     MOV     DPTR,#?_sprintf?BYTE+03H
0783 74FF              MOV     A,#0FFH
0785 F0                MOVX    @DPTR,A
0786 A3                INC     DPTR
0787 7400        R     MOV     A,#HIGH ?SC_330
0789 F0                MOVX    @DPTR,A
078A A3                INC     DPTR
078B 7400        R     MOV     A,#LOW ?SC_330
078D F0                MOVX    @DPTR,A
078E 900000      E     MOV     DPTR,#timer_value
0791 E0                MOVX    A,@DPTR
0792 F8                MOV     R0,A
0793 A3                INC     DPTR
0794 E0                MOVX    A,@DPTR
0795 F9                MOV     R1,A
0796 A3                INC     DPTR
0797 E0                MOVX    A,@DPTR
0798 FA                MOV     R2,A
0799 A3                INC     DPTR
079A E0                MOVX    A,@DPTR
079B FB                MOV     R3,A
079C 900000      E     MOV     DPTR,#timer_value0
079F E0                MOVX    A,@DPTR
07A0 FC                MOV     R4,A
07A1 A3                INC     DPTR
07A2 E0                MOVX    A,@DPTR
07A3 FD                MOV     R5,A
07A4 A3                INC     DPTR
07A5 E0                MOVX    A,@DPTR
07A6 FE                MOV     R6,A
07A7 A3                INC     DPTR
07A8 E0                MOVX    A,@DPTR
07A9 C3                CLR     C
07AA 9B                SUBB    A,R3
07AB FF                MOV     R7,A
07AC EE                MOV     A,R6
07AD 9A                SUBB    A,R2
07AE FE                MOV     R6,A
07AF ED                MOV     A,R5
07B0 99                SUBB    A,R1
07B1 FD                MOV     R5,A
07B2 EC                MOV     A,R4
07B3 98                SUBB    A,R0
07B4 FC                MOV     R4,A
07B5 900000      E     MOV     DPTR,#?_sprintf?BYTE+06H
07B8 120000      E     LCALL   ?C?LSTXDATA
07BB 7B01              MOV     R3,#01H
07BD 7A00        R     MOV     R2,#HIGH str
07BF 7900        R     MOV     R1,#LOW str
07C1 120000      E     LCALL   _sprintf
                                           ; SOURCE LINE # 465
07C4 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
07C7 7401              MOV     A,#01H
07C9 F0                MOVX    @DPTR,A
07CA A3                INC     DPTR
07CB 7400        R     MOV     A,#HIGH str
07CD F0                MOVX    @DPTR,A
07CE A3                INC     DPTR
07CF 7400        R     MOV     A,#LOW str
07D1 F0                MOVX    @DPTR,A
07D2 900000      R     MOV     DPTR,#info_string
07D5 E0                MOVX    A,@DPTR
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 60  

07D6 FB                MOV     R3,A
07D7 A3                INC     DPTR
07D8 E0                MOVX    A,@DPTR
07D9 FA                MOV     R2,A
07DA A3                INC     DPTR
07DB E0                MOVX    A,@DPTR
07DC F9                MOV     R1,A
07DD 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 466
07E0 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
07E3 74FF              MOV     A,#0FFH
07E5 F0                MOVX    @DPTR,A
07E6 A3                INC     DPTR
07E7 7400        R     MOV     A,#HIGH ?SC_28
07E9 F0                MOVX    @DPTR,A
07EA A3                INC     DPTR
07EB 7400        R     MOV     A,#LOW ?SC_28
07ED F0                MOVX    @DPTR,A
07EE 900000      R     MOV     DPTR,#info_string
07F1 E0                MOVX    A,@DPTR
07F2 FB                MOV     R3,A
07F3 A3                INC     DPTR
07F4 E0                MOVX    A,@DPTR
07F5 FA                MOV     R2,A
07F6 A3                INC     DPTR
07F7 E0                MOVX    A,@DPTR
07F8 F9                MOV     R1,A
07F9 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 467
07FC 900000      E     MOV     DPTR,#?_strcat?BYTE+03H
07FF 74FF              MOV     A,#0FFH
0801 F0                MOVX    @DPTR,A
0802 A3                INC     DPTR
0803 7400        R     MOV     A,#HIGH ?SC_28
0805 F0                MOVX    @DPTR,A
0806 A3                INC     DPTR
0807 7400        R     MOV     A,#LOW ?SC_28
0809 F0                MOVX    @DPTR,A
080A 900000      R     MOV     DPTR,#info_string
080D E0                MOVX    A,@DPTR
080E FB                MOV     R3,A
080F A3                INC     DPTR
0810 E0                MOVX    A,@DPTR
0811 FA                MOV     R2,A
0812 A3                INC     DPTR
0813 E0                MOVX    A,@DPTR
0814 F9                MOV     R1,A
0815 120000      E     LCALL   _strcat
                                           ; SOURCE LINE # 468
                                           ; SOURCE LINE # 469
0818         ?C0095:
0818 22                RET     
             ; FUNCTION _infoPrepare (END)

             ; FUNCTION _commWrite (BEGIN)
                                           ; SOURCE LINE # 475
0000 900000      R     MOV     DPTR,#packet_data
0003 EB                MOV     A,R3
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EA                MOV     A,R2
0007 F0                MOVX    @DPTR,A
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 61  

0008 A3                INC     DPTR
0009 E9                MOV     A,R1
000A F0                MOVX    @DPTR,A
000B A3                INC     DPTR
000C EC                MOV     A,R4
000D F0                MOVX    @DPTR,A
000E A3                INC     DPTR
000F ED                MOV     A,R5
0010 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 476
                                           ; SOURCE LINE # 480
0011 7F3A              MOV     R7,#03AH
0013 120000      E     LCALL   _UART_RS485_PutChar
                                           ; SOURCE LINE # 481
0016 7F3A              MOV     R7,#03AH
0018 120000      E     LCALL   _UART_RS485_PutChar
                                           ; SOURCE LINE # 484
001B 900000      E     MOV     DPTR,#g_mem+01H
001E E0                MOVX    A,@DPTR
001F FF                MOV     R7,A
0020 120000      E     LCALL   _UART_RS485_PutChar
                                           ; SOURCE LINE # 487
0023 900000      R     MOV     DPTR,#packet_lenght
0026 E0                MOVX    A,@DPTR
0027 A3                INC     DPTR
0028 E0                MOVX    A,@DPTR
0029 FF                MOV     R7,A
002A 120000      E     LCALL   _UART_RS485_PutChar
                                           ; SOURCE LINE # 490
002D E4                CLR     A
002E F500        R     MOV     index,A
0030 F500        R     MOV     index+01H,A
0032         ?C0096:
0032 D3                SETB    C
0033 900000      R     MOV     DPTR,#packet_lenght+01H
0036 E0                MOVX    A,@DPTR
0037 9500        R     SUBB    A,index+01H
0039 900000      R     MOV     DPTR,#packet_lenght
003C E0                MOVX    A,@DPTR
003D 9500        R     SUBB    A,index
003F 4022              JC      ?C0097
                                           ; SOURCE LINE # 491
0041 900000      R     MOV     DPTR,#packet_data
0044 E0                MOVX    A,@DPTR
0045 FB                MOV     R3,A
0046 A3                INC     DPTR
0047 E0                MOVX    A,@DPTR
0048 FA                MOV     R2,A
0049 A3                INC     DPTR
004A E0                MOVX    A,@DPTR
004B 2500        R     ADD     A,index+01H
004D F9                MOV     R1,A
004E EA                MOV     A,R2
004F 3500        R     ADDC    A,index
0051 FA                MOV     R2,A
0052 120000      E     LCALL   ?C?CLDPTR
0055 FF                MOV     R7,A
0056 120000      E     LCALL   _UART_RS485_PutChar
0059 0500        R     INC     index+01H
005B E500        R     MOV     A,index+01H
005D 7002              JNZ     ?C0170
005F 0500        R     INC     index
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 62  

0061         ?C0170:
0061 80CF              SJMP    ?C0096
0063         ?C0097:
                                           ; SOURCE LINE # 493
0063 E4                CLR     A
0064 F500        R     MOV     index,A
0066 F500        R     MOV     index+01H,A
0068         ?C0099:
                                           ; SOURCE LINE # 495
0068 120000      E     LCALL   UART_RS485_ReadTxStatus
006B EF                MOV     A,R7
006C 20E013            JB      ACC.0,?C0100
006F 0500        R     INC     index+01H
0071 E500        R     MOV     A,index+01H
0073 AE00        R     MOV     R6,index
0075 7002              JNZ     ?C0171
0077 0500        R     INC     index
0079         ?C0171:
0079 14                DEC     A
007A D3                SETB    C
007B 94E8              SUBB    A,#0E8H
007D EE                MOV     A,R6
007E 9403              SUBB    A,#03H
0080 40E6              JC      ?C0099
0082         ?C0100:
                                           ; SOURCE LINE # 497
0082 7F01              MOV     R7,#01H
0084 120000      E     LCALL   _RS485_CTS_Write
                                           ; SOURCE LINE # 498
0087 E4                CLR     A
0088 FF                MOV     R7,A
0089 120000      E     LCALL   _RS485_CTS_Write
                                           ; SOURCE LINE # 499
008C 22                RET     
             ; FUNCTION _commWrite (END)

             ; FUNCTION _LCRChecksum (BEGIN)
                                           ; SOURCE LINE # 508
0000 900000      R     MOV     DPTR,#data_array
0003 EB                MOV     A,R3
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EA                MOV     A,R2
0007 F0                MOVX    @DPTR,A
0008 A3                INC     DPTR
0009 E9                MOV     A,R1
000A F0                MOVX    @DPTR,A
;---- Variable 'data_length' assigned to Register 'R5' ----
                                           ; SOURCE LINE # 511
000B E4                CLR     A
000C F500        R     MOV     checksum,A
                                           ; SOURCE LINE # 513
000E F500        R     MOV     i,A
0010         ?C0102:
0010 E500        R     MOV     A,i
0012 C3                CLR     C
0013 9D                SUBB    A,R5
0014 5019              JNC     ?C0103
                                           ; SOURCE LINE # 514
0016 900000      R     MOV     DPTR,#data_array
0019 E0                MOVX    A,@DPTR
001A FB                MOV     R3,A
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 63  

001B A3                INC     DPTR
001C E0                MOVX    A,@DPTR
001D FA                MOV     R2,A
001E A3                INC     DPTR
001F E0                MOVX    A,@DPTR
0020 2500        R     ADD     A,i
0022 F9                MOV     R1,A
0023 E4                CLR     A
0024 3A                ADDC    A,R2
0025 FA                MOV     R2,A
0026 120000      E     LCALL   ?C?CLDPTR
0029 6200        R     XRL     checksum,A
002B 0500        R     INC     i
002D 80E1              SJMP    ?C0102
002F         ?C0103:
                                           ; SOURCE LINE # 516
002F AF00        R     MOV     R7,checksum
                                           ; SOURCE LINE # 517
0031         ?C0105:
0031 22                RET     
             ; FUNCTION _LCRChecksum (END)

             ; FUNCTION _sendAcknowledgment (BEGIN)
                                           ; SOURCE LINE # 523
;---- Variable 'value' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 524
;---- Variable 'packet_lenght' assigned to Register 'R4/R5' ----
0000 7D02              MOV     R5,#02H
0002 7C00              MOV     R4,#00H
                                           ; SOURCE LINE # 527
0004 900000      R     MOV     DPTR,#packet_data
0007 EF                MOV     A,R7
0008 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 528
0009 A3                INC     DPTR
000A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 530
000B 7B01              MOV     R3,#01H
000D 7A00        R     MOV     R2,#HIGH packet_data
000F 7900        R     MOV     R1,#LOW packet_data
0011 120000      R     LCALL   _commWrite
                                           ; SOURCE LINE # 531
0014 22                RET     
             ; FUNCTION _sendAcknowledgment (END)

             ; FUNCTION _memStore (BEGIN)
                                           ; SOURCE LINE # 542
0000 900000      R     MOV     DPTR,#displacement
0003 EE                MOV     A,R6
0004 F0                MOVX    @DPTR,A
0005 A3                INC     DPTR
0006 EF                MOV     A,R7
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 543
                                           ; SOURCE LINE # 547
0008 900000      R     MOV     DPTR,#ret_val
000B 7401              MOV     A,#01H
000D F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 550
000E 120000      E     LCALL   ISR_RS485_RX_Disable
                                           ; SOURCE LINE # 554
0011 120000      E     LCALL   CySetTemp
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 64  

                                           ; SOURCE LINE # 556
0014 7800        E     MOV     R0,#LOW c_mem
0016 7C00        E     MOV     R4,#HIGH c_mem
0018 7D01              MOV     R5,#01H
001A 7B01              MOV     R3,#01H
001C 7A00        E     MOV     R2,#HIGH g_mem
001E 7900        E     MOV     R1,#LOW g_mem
0020 7E00              MOV     R6,#00H
0022 7F04              MOV     R7,#04H
0024 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 558
0027 900000      R     MOV     DPTR,#pages
002A E4                CLR     A
002B F0                MOVX    @DPTR,A
002C A3                INC     DPTR
002D 04                INC     A
002E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 560
002F E4                CLR     A
0030 900000      R     MOV     DPTR,#i
0033 F0                MOVX    @DPTR,A
0034 A3                INC     DPTR
0035 F0                MOVX    @DPTR,A
0036         ?C0107:
0036 900000      R     MOV     DPTR,#pages
0039 E0                MOVX    A,@DPTR
003A FE                MOV     R6,A
003B A3                INC     DPTR
003C E0                MOVX    A,@DPTR
003D FF                MOV     R7,A
003E 900000      R     MOV     DPTR,#i
0041 E0                MOVX    A,@DPTR
0042 FC                MOV     R4,A
0043 A3                INC     DPTR
0044 E0                MOVX    A,@DPTR
0045 FD                MOV     R5,A
0046 C3                CLR     C
0047 9F                SUBB    A,R7
0048 EE                MOV     A,R6
0049 6480              XRL     A,#080H
004B F8                MOV     R0,A
004C EC                MOV     A,R4
004D 6480              XRL     A,#080H
004F 98                SUBB    A,R0
0050 503F              JNC     ?C0108
                                           ; SOURCE LINE # 561
0052 ED                MOV     A,R5
0053 C4                SWAP    A
0054 F8                MOV     R0,A
0055 540F              ANL     A,#0FH
0057 C8                XCH     A,R0
0058 68                XRL     A,R0
0059 FF                MOV     R7,A
005A EC                MOV     A,R4
005B C4                SWAP    A
005C 54F0              ANL     A,#0F0H
005E 48                ORL     A,R0
005F FE                MOV     R6,A
0060 7B01              MOV     R3,#01H
0062 7400        E     MOV     A,#LOW g_mem
0064 2F                ADD     A,R7
0065 F9                MOV     R1,A
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 65  

0066 7400        E     MOV     A,#HIGH g_mem
0068 3E                ADDC    A,R6
0069 FA                MOV     R2,A
006A 900000      R     MOV     DPTR,#displacement
006D E0                MOVX    A,@DPTR
006E A3                INC     DPTR
006F E0                MOVX    A,@DPTR
0070 FF                MOV     R7,A
0071 ED                MOV     A,R5
0072 2F                ADD     A,R7
0073 FD                MOV     R5,A
0074 120000      E     LCALL   _EEPROM_Write
;---- Variable 'writeStatus' assigned to Register 'R7' ----
                                           ; SOURCE LINE # 562
0077 EF                MOV     A,R7
0078 6007              JZ      ?C0109
                                           ; SOURCE LINE # 563
007A E4                CLR     A
007B 900000      R     MOV     DPTR,#ret_val
007E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 564
007F 8010              SJMP    ?C0108
                                           ; SOURCE LINE # 565
                                           ; SOURCE LINE # 566
0081         ?C0109:
0081 900000      R     MOV     DPTR,#i+01H
0084 E0                MOVX    A,@DPTR
0085 04                INC     A
0086 F0                MOVX    @DPTR,A
0087 7006              JNZ     ?C0172
0089 900000      R     MOV     DPTR,#i
008C E0                MOVX    A,@DPTR
008D 04                INC     A
008E F0                MOVX    @DPTR,A
008F         ?C0172:
008F 80A5              SJMP    ?C0107
0091         ?C0108:
                                           ; SOURCE LINE # 568
0091 7800        E     MOV     R0,#LOW g_mem
0093 7C00        E     MOV     R4,#HIGH g_mem
0095 7D01              MOV     R5,#01H
0097 7B01              MOV     R3,#01H
0099 7A00        E     MOV     R2,#HIGH c_mem
009B 7900        E     MOV     R1,#LOW c_mem
009D 7E00              MOV     R6,#00H
009F 7F04              MOV     R7,#04H
00A1 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 571
00A4 120000      E     LCALL   ISR_RS485_RX_Enable
                                           ; SOURCE LINE # 573
00A7 900000      R     MOV     DPTR,#ret_val
00AA E0                MOVX    A,@DPTR
00AB FF                MOV     R7,A
                                           ; SOURCE LINE # 574
00AC         ?C0111:
00AC 22                RET     
             ; FUNCTION _memStore (END)

             ; FUNCTION memRecall (BEGIN)
                                           ; SOURCE LINE # 585
                                           ; SOURCE LINE # 586
                                           ; SOURCE LINE # 589
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 66  

;---- Variable 'i' assigned to Register 'R6/R7' ----
0000 E4                CLR     A
0001 FF                MOV     R7,A
0002 FE                MOV     R6,A
0003         ?C0112:
0003 C3                CLR     C
0004 EF                MOV     A,R7
0005 9404              SUBB    A,#04H
0007 EE                MOV     A,R6
0008 9400              SUBB    A,#00H
000A 5023              JNC     ?C0113
                                           ; SOURCE LINE # 590
000C 900000      R     MOV     DPTR,#EEPROM_ADDR
000F E0                MOVX    A,@DPTR
0010 FC                MOV     R4,A
0011 A3                INC     DPTR
0012 E0                MOVX    A,@DPTR
0013 2F                ADD     A,R7
0014 F582              MOV     DPL,A
0016 EC                MOV     A,R4
0017 3E                ADDC    A,R6
0018 F583              MOV     DPH,A
001A E0                MOVX    A,@DPTR
001B FD                MOV     R5,A
001C 7400        E     MOV     A,#LOW g_mem
001E 2F                ADD     A,R7
001F F582              MOV     DPL,A
0021 7400        E     MOV     A,#HIGH g_mem
0023 3E                ADDC    A,R6
0024 F583              MOV     DPH,A
0026 ED                MOV     A,R5
0027 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 591
0028 0F                INC     R7
0029 EF                MOV     A,R7
002A 7001              JNZ     ?C0173
002C 0E                INC     R6
002D         ?C0173:
002D 80D4              SJMP    ?C0112
002F         ?C0113:
                                           ; SOURCE LINE # 594
002F 900000      E     MOV     DPTR,#g_mem
0032 E0                MOVX    A,@DPTR
0033 7004              JNZ     ?C0115
                                           ; SOURCE LINE # 595
0035 120000      R     LCALL   memRestore
                                           ; SOURCE LINE # 596
0038 22                RET     
0039         ?C0115:
                                           ; SOURCE LINE # 597
0039 7800        E     MOV     R0,#LOW c_mem
003B 7C00        E     MOV     R4,#HIGH c_mem
003D 7D01              MOV     R5,#01H
003F 7B01              MOV     R3,#01H
0041 7A00        E     MOV     R2,#HIGH g_mem
0043 7900        E     MOV     R1,#LOW g_mem
0045 7E00              MOV     R6,#00H
0047 7F04              MOV     R7,#04H
0049 120000      E     LCALL   ?C?COPYAMD
                                           ; SOURCE LINE # 598
                                           ; SOURCE LINE # 599
004C         ?C0117:
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 67  

004C 22                RET     
             ; FUNCTION memRecall (END)

             ; FUNCTION memRestore (BEGIN)
                                           ; SOURCE LINE # 610
                                           ; SOURCE LINE # 613
;---- Variable 'i' assigned to Register 'R6/R7' ----
0000 E4                CLR     A
0001 FF                MOV     R7,A
0002 FE                MOV     R6,A
0003         ?C0118:
0003 C3                CLR     C
0004 EF                MOV     A,R7
0005 9404              SUBB    A,#04H
0007 EE                MOV     A,R6
0008 9400              SUBB    A,#00H
000A 502A              JNC     ?C0119
                                           ; SOURCE LINE # 614
000C EF                MOV     A,R7
000D 2480              ADD     A,#080H
000F FD                MOV     R5,A
0010 E4                CLR     A
0011 3E                ADDC    A,R6
0012 FC                MOV     R4,A
0013 900000      R     MOV     DPTR,#EEPROM_ADDR
0016 E0                MOVX    A,@DPTR
0017 FA                MOV     R2,A
0018 A3                INC     DPTR
0019 E0                MOVX    A,@DPTR
001A 2D                ADD     A,R5
001B F582              MOV     DPL,A
001D EA                MOV     A,R2
001E 3C                ADDC    A,R4
001F F583              MOV     DPH,A
0021 E0                MOVX    A,@DPTR
0022 FD                MOV     R5,A
0023 7400        E     MOV     A,#LOW g_mem
0025 2F                ADD     A,R7
0026 F582              MOV     DPL,A
0028 7400        E     MOV     A,#HIGH g_mem
002A 3E                ADDC    A,R6
002B F583              MOV     DPH,A
002D ED                MOV     A,R5
002E F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 615
002F 0F                INC     R7
0030 EF                MOV     A,R7
0031 7001              JNZ     ?C0174
0033 0E                INC     R6
0034         ?C0174:
0034 80CD              SJMP    ?C0118
0036         ?C0119:
                                           ; SOURCE LINE # 618
0036 900000      E     MOV     DPTR,#g_mem
0039 E0                MOVX    A,@DPTR
003A 7004              JNZ     ?C0121
                                           ; SOURCE LINE # 619
003C 120000      R     LCALL   memInit
003F 22                RET     
                                           ; SOURCE LINE # 620
0040         ?C0121:
                                           ; SOURCE LINE # 621
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 68  

0040 E4                CLR     A
0041 FF                MOV     R7,A
0042 FE                MOV     R6,A
0043 120000      R     LCALL   _memStore
                                           ; SOURCE LINE # 622
                                           ; SOURCE LINE # 623
0046         ?C0122:
0046 22                RET     
             ; FUNCTION memRestore (END)

             ; FUNCTION memInit (BEGIN)
                                           ; SOURCE LINE # 633
                                           ; SOURCE LINE # 634
                                           ; SOURCE LINE # 637
0000 900000      E     MOV     DPTR,#g_mem+01H
0003 7401              MOV     A,#01H
0005 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 641
0006 900000      E     MOV     DPTR,#g_mem
0009 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 644
000A E4                CLR     A
000B FF                MOV     R7,A
000C FE                MOV     R6,A
000D 120000      R     LCALL   _memStore
0010 EF                MOV     A,R7
0011 600E              JZ      ?C0124
0013 7F08              MOV     R7,#08H
0015 7E00              MOV     R6,#00H
0017 120000      R     LCALL   _memStore
001A EF                MOV     A,R7
001B 6004              JZ      ?C0124
001D 7F01              MOV     R7,#01H
001F 8002              SJMP    ?C0125
0021         ?C0124:
0021 7F00              MOV     R7,#00H
0023         ?C0125:
                                           ; SOURCE LINE # 645
0023         ?C0126:
0023 22                RET     
             ; FUNCTION memInit (END)

             ; FUNCTION cmd_get_measurements (BEGIN)
                                           ; SOURCE LINE # 654
                                           ; SOURCE LINE # 656
0000 22                RET     
             ; FUNCTION cmd_get_measurements (END)

             ; FUNCTION cmd_set_inputs (BEGIN)
                                           ; SOURCE LINE # 658
                                           ; SOURCE LINE # 660
0000 22                RET     
             ; FUNCTION cmd_set_inputs (END)

             ; FUNCTION cmd_activate (BEGIN)
                                           ; SOURCE LINE # 662
                                           ; SOURCE LINE # 664
0000 22                RET     
             ; FUNCTION cmd_activate (END)

             ; FUNCTION cmd_get_activate (BEGIN)
                                           ; SOURCE LINE # 666
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 69  

                                           ; SOURCE LINE # 668
0000 22                RET     
             ; FUNCTION cmd_get_activate (END)

             ; FUNCTION cmd_get_curr_and_meas (BEGIN)
                                           ; SOURCE LINE # 670
                                           ; SOURCE LINE # 672
0000 22                RET     
             ; FUNCTION cmd_get_curr_and_meas (END)

             ; FUNCTION cmd_get_currents (BEGIN)
                                           ; SOURCE LINE # 674
                                           ; SOURCE LINE # 676
0000 22                RET     
             ; FUNCTION cmd_get_currents (END)

             ; FUNCTION cmd_set_baudrate (BEGIN)
                                           ; SOURCE LINE # 678
                                           ; SOURCE LINE # 681
0000 900000      E     MOV     DPTR,#g_rx+01H
0003 E0                MOVX    A,@DPTR
0004 900000      E     MOV     DPTR,#c_mem+02H
0007 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 683
0008 24F3              ADD     A,#0F3H
000A 700A              JNZ     ?C0135
                                           ; SOURCE LINE # 684
000C         ?C0134:
                                           ; SOURCE LINE # 685
000C 7D01              MOV     R5,#01H
000E 7F0C              MOV     R7,#0CH
0010 7E00              MOV     R6,#00H
0012 120000      E     LCALL   _CLOCK_UART_SetDividerRegister
                                           ; SOURCE LINE # 686
0015 22                RET     
                                           ; SOURCE LINE # 687
0016         ?C0135:
                                           ; SOURCE LINE # 688
0016 7D01              MOV     R5,#01H
0018 7F02              MOV     R7,#02H
001A 7E00              MOV     R6,#00H
001C 120000      E     LCALL   _CLOCK_UART_SetDividerRegister
                                           ; SOURCE LINE # 689
                                           ; SOURCE LINE # 690
001F         ?C0136:
001F 22                RET     
             ; FUNCTION cmd_set_baudrate (END)

             ; FUNCTION cmd_ping (BEGIN)
                                           ; SOURCE LINE # 692
                                           ; SOURCE LINE # 697
0000 E4                CLR     A
0001 900000      R     MOV     DPTR,#packet_data
0004 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 700
0005 A3                INC     DPTR
0006 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 703
0007 7B01              MOV     R3,#01H
0009 7A00        R     MOV     R2,#HIGH packet_data
000B 7900        R     MOV     R1,#LOW packet_data
000D 7D02              MOV     R5,#02H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 70  

000F FC                MOV     R4,A
0010 120000      R     LCALL   _commWrite
                                           ; SOURCE LINE # 704
0013 22                RET     
             ; FUNCTION cmd_ping (END)

             ; FUNCTION cmd_set_watchdog (BEGIN)
                                           ; SOURCE LINE # 706
                                           ; SOURCE LINE # 708
0000 900000      E     MOV     DPTR,#g_rx+01H
0003 E0                MOVX    A,@DPTR
0004 D3                SETB    C
0005 9400              SUBB    A,#00H
0007 500B              JNC     ?C0138
                                           ; SOURCE LINE # 710
0009 7F01              MOV     R7,#01H
000B 120000      E     LCALL   _WATCHDOG_ENABLER_Write
                                           ; SOURCE LINE # 711
000E E4                CLR     A
000F 900000      E     MOV     DPTR,#g_mem+03H
0012 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 712
0013 22                RET     
0014         ?C0138:
                                           ; SOURCE LINE # 713
                                           ; SOURCE LINE # 715
0014 900000      E     MOV     DPTR,#g_rx+01H
0017 E0                MOVX    A,@DPTR
0018 D3                SETB    C
0019 94FA              SUBB    A,#0FAH
001B 4003              JC      ?C0140
                                           ; SOURCE LINE # 716
001D 74FA              MOV     A,#0FAH
001F F0                MOVX    @DPTR,A
0020         ?C0140:
                                           ; SOURCE LINE # 721
0020 900000      E     MOV     DPTR,#g_rx+01H
0023 E0                MOVX    A,@DPTR
0024 FF                MOV     R7,A
0025 7E00              MOV     R6,#00H
0027 7C01              MOV     R4,#01H
0029 7DF4              MOV     R5,#0F4H
002B 120000      E     LCALL   ?C?LIMUL
002E 780A              MOV     R0,#0AH
0030 120000      E     LCALL   ?C?ULSHR
0033 900000      E     MOV     DPTR,#g_mem+03H
0036 EF                MOV     A,R7
0037 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 722
0038 120000      E     LCALL   _WATCHDOG_COUNTER_WritePeriod
                                           ; SOURCE LINE # 723
003B E4                CLR     A
003C FF                MOV     R7,A
003D 120000      E     LCALL   _WATCHDOG_ENABLER_Write
                                           ; SOURCE LINE # 724
                                           ; SOURCE LINE # 725
0040         ?C0141:
0040 22                RET     
             ; FUNCTION cmd_set_watchdog (END)

             ; FUNCTION cmd_get_inputs (BEGIN)
                                           ; SOURCE LINE # 727
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 71  

                                           ; SOURCE LINE # 729
0000 22                RET     
             ; FUNCTION cmd_get_inputs (END)

             ; FUNCTION cmd_store_params (BEGIN)
                                           ; SOURCE LINE # 731
                                           ; SOURCE LINE # 733
0000 E4                CLR     A
0001 FF                MOV     R7,A
0002 FE                MOV     R6,A
0003 120000      R     LCALL   _memStore
0006 EF                MOV     A,R7
0007 6006              JZ      ?C0143
                                           ; SOURCE LINE # 734
0009 7F01              MOV     R7,#01H
000B 120000      R     LCALL   _sendAcknowledgment
000E 22                RET     
000F         ?C0143:
                                           ; SOURCE LINE # 736
000F E4                CLR     A
0010 FF                MOV     R7,A
0011 120000      R     LCALL   _sendAcknowledgment
                                           ; SOURCE LINE # 737
0014         ?C0145:
0014 22                RET     
             ; FUNCTION cmd_store_params (END)

             ; FUNCTION cmd_get_emg (BEGIN)
                                           ; SOURCE LINE # 739
                                           ; SOURCE LINE # 741
0000 22                RET     
             ; FUNCTION cmd_get_emg (END)

             ; FUNCTION cmd_get_imu_readings (BEGIN)
                                           ; SOURCE LINE # 743
                                           ; SOURCE LINE # 747
0000 900000      R     MOV     DPTR,#c
0003 7401              MOV     A,#01H
0005 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 748
0006 E4                CLR     A
0007 A3                INC     DPTR
0008 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 749
0009 A3                INC     DPTR
000A 04                INC     A
000B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 759
000C A3                INC     DPTR
000D 74A1              MOV     A,#0A1H
000F F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 761
0010 E4                CLR     A
0011 900000      R     MOV     DPTR,#k_imu
0014 F0                MOVX    @DPTR,A
0015         ?C0147:
0015 900000      E     MOV     DPTR,#N_IMU_Connected
0018 E0                MOVX    A,@DPTR
0019 FF                MOV     R7,A
001A 900000      R     MOV     DPTR,#k_imu
001D E0                MOVX    A,@DPTR
001E FE                MOV     R6,A
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 72  

001F C3                CLR     C
0020 9F                SUBB    A,R7
0021 4003              JC      $ + 5H
0023 020000      R     LJMP    ?C0148
                                           ; SOURCE LINE # 762
                                           ; SOURCE LINE # 764
0026 900000      R     MOV     DPTR,#single_packet
0029 743A              MOV     A,#03AH
002B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 765
002C 7400        E     MOV     A,#LOW IMU_connected
002E 2E                ADD     A,R6
002F F582              MOV     DPL,A
0031 E4                CLR     A
0032 3400        E     ADDC    A,#HIGH IMU_connected
0034 F583              MOV     DPH,A
0036 E0                MOVX    A,@DPTR
0037 75F005            MOV     B,#05H
003A A4                MUL     AB
003B 2400        E     ADD     A,#LOW IMU_conf
003D F582              MOV     DPL,A
003F E4                CLR     A
0040 3400        E     ADDC    A,#HIGH IMU_conf
0042 F583              MOV     DPH,A
0044 E0                MOVX    A,@DPTR
0045 607B              JZ      ?C0150
                                           ; SOURCE LINE # 766
0047 900000      R     MOV     DPTR,#k_imu
004A E0                MOVX    A,@DPTR
004B FF                MOV     R7,A
004C 75F015            MOV     B,#015H
004F A4                MUL     AB
0050 2400        E     ADD     A,#LOW g_imu+01H
0052 F582              MOV     DPL,A
0054 E5F0              MOV     A,B
0056 3400        E     ADDC    A,#HIGH g_imu+01H
0058 F583              MOV     DPH,A
005A E0                MOVX    A,@DPTR
005B FC                MOV     R4,A
005C A3                INC     DPTR
005D E0                MOVX    A,@DPTR
005E FD                MOV     R5,A
005F 900000      R     MOV     DPTR,#c
0062 E0                MOVX    A,@DPTR
0063 FE                MOV     R6,A
0064 2400        R     ADD     A,#LOW single_packet
0066 F582              MOV     DPL,A
0068 E4                CLR     A
0069 3400        R     ADDC    A,#HIGH single_packet
006B F583              MOV     DPH,A
006D EC                MOV     A,R4
006E F0                MOVX    @DPTR,A
006F A3                INC     DPTR
0070 ED                MOV     A,R5
0071 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 767
0072 75F015            MOV     B,#015H
0075 EF                MOV     A,R7
0076 A4                MUL     AB
0077 2400        E     ADD     A,#LOW g_imu+03H
0079 F582              MOV     DPL,A
007B E5F0              MOV     A,B
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 73  

007D 3400        E     ADDC    A,#HIGH g_imu+03H
007F F583              MOV     DPH,A
0081 E0                MOVX    A,@DPTR
0082 FC                MOV     R4,A
0083 A3                INC     DPTR
0084 E0                MOVX    A,@DPTR
0085 FD                MOV     R5,A
0086 7400        R     MOV     A,#LOW single_packet+02H
0088 2E                ADD     A,R6
0089 F582              MOV     DPL,A
008B E4                CLR     A
008C 3400        R     ADDC    A,#HIGH single_packet+02H
008E F583              MOV     DPH,A
0090 EC                MOV     A,R4
0091 F0                MOVX    @DPTR,A
0092 A3                INC     DPTR
0093 ED                MOV     A,R5
0094 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 768
0095 900000      R     MOV     DPTR,#k_imu
0098 E0                MOVX    A,@DPTR
0099 75F015            MOV     B,#015H
009C A4                MUL     AB
009D 2400        E     ADD     A,#LOW g_imu+05H
009F F582              MOV     DPL,A
00A1 E5F0              MOV     A,B
00A3 3400        E     ADDC    A,#HIGH g_imu+05H
00A5 F583              MOV     DPH,A
00A7 E0                MOVX    A,@DPTR
00A8 FC                MOV     R4,A
00A9 A3                INC     DPTR
00AA E0                MOVX    A,@DPTR
00AB FD                MOV     R5,A
00AC 7400        R     MOV     A,#LOW single_packet+04H
00AE 2E                ADD     A,R6
00AF F582              MOV     DPL,A
00B1 E4                CLR     A
00B2 3400        R     ADDC    A,#HIGH single_packet+04H
00B4 F583              MOV     DPH,A
00B6 EC                MOV     A,R4
00B7 F0                MOVX    @DPTR,A
00B8 A3                INC     DPTR
00B9 ED                MOV     A,R5
00BA F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 769
00BB 900000      R     MOV     DPTR,#c
00BE E0                MOVX    A,@DPTR
00BF 2406              ADD     A,#06H
00C1 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 770
00C2         ?C0150:
                                           ; SOURCE LINE # 771
00C2 900000      R     MOV     DPTR,#k_imu
00C5 E0                MOVX    A,@DPTR
00C6 FF                MOV     R7,A
00C7 2400        E     ADD     A,#LOW IMU_connected
00C9 F582              MOV     DPL,A
00CB E4                CLR     A
00CC 3400        E     ADDC    A,#HIGH IMU_connected
00CE F583              MOV     DPH,A
00D0 E0                MOVX    A,@DPTR
00D1 75F005            MOV     B,#05H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 74  

00D4 A4                MUL     AB
00D5 2400        E     ADD     A,#LOW IMU_conf+01H
00D7 F582              MOV     DPL,A
00D9 E4                CLR     A
00DA 3400        E     ADDC    A,#HIGH IMU_conf+01H
00DC F583              MOV     DPH,A
00DE E0                MOVX    A,@DPTR
00DF 6078              JZ      ?C0151
                                           ; SOURCE LINE # 772
00E1 900000      R     MOV     DPTR,#k_imu
00E4 E0                MOVX    A,@DPTR
00E5 FE                MOV     R6,A
00E6 75F015            MOV     B,#015H
00E9 A4                MUL     AB
00EA 2400        E     ADD     A,#LOW g_imu+07H
00EC F582              MOV     DPL,A
00EE E5F0              MOV     A,B
00F0 3400        E     ADDC    A,#HIGH g_imu+07H
00F2 F583              MOV     DPH,A
00F4 E0                MOVX    A,@DPTR
00F5 FC                MOV     R4,A
00F6 A3                INC     DPTR
00F7 E0                MOVX    A,@DPTR
00F8 FD                MOV     R5,A
00F9 900000      R     MOV     DPTR,#c
00FC E0                MOVX    A,@DPTR
00FD FB                MOV     R3,A
00FE 2400        R     ADD     A,#LOW single_packet
0100 F582              MOV     DPL,A
0102 E4                CLR     A
0103 3400        R     ADDC    A,#HIGH single_packet
0105 F583              MOV     DPH,A
0107 EC                MOV     A,R4
0108 F0                MOVX    @DPTR,A
0109 A3                INC     DPTR
010A ED                MOV     A,R5
010B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 773
010C 75F015            MOV     B,#015H
010F EE                MOV     A,R6
0110 A4                MUL     AB
0111 2400        E     ADD     A,#LOW g_imu+09H
0113 F582              MOV     DPL,A
0115 E5F0              MOV     A,B
0117 3400        E     ADDC    A,#HIGH g_imu+09H
0119 F583              MOV     DPH,A
011B E0                MOVX    A,@DPTR
011C FC                MOV     R4,A
011D A3                INC     DPTR
011E E0                MOVX    A,@DPTR
011F FD                MOV     R5,A
0120 7400        R     MOV     A,#LOW single_packet+02H
0122 2B                ADD     A,R3
0123 F582              MOV     DPL,A
0125 E4                CLR     A
0126 3400        R     ADDC    A,#HIGH single_packet+02H
0128 F583              MOV     DPH,A
012A EC                MOV     A,R4
012B F0                MOVX    @DPTR,A
012C A3                INC     DPTR
012D ED                MOV     A,R5
012E F0                MOVX    @DPTR,A
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 75  

                                           ; SOURCE LINE # 774
012F 75F015            MOV     B,#015H
0132 EF                MOV     A,R7
0133 A4                MUL     AB
0134 2400        E     ADD     A,#LOW g_imu+0BH
0136 F582              MOV     DPL,A
0138 E5F0              MOV     A,B
013A 3400        E     ADDC    A,#HIGH g_imu+0BH
013C F583              MOV     DPH,A
013E E0                MOVX    A,@DPTR
013F FE                MOV     R6,A
0140 A3                INC     DPTR
0141 E0                MOVX    A,@DPTR
0142 FF                MOV     R7,A
0143 7400        R     MOV     A,#LOW single_packet+04H
0145 2B                ADD     A,R3
0146 F582              MOV     DPL,A
0148 E4                CLR     A
0149 3400        R     ADDC    A,#HIGH single_packet+04H
014B F583              MOV     DPH,A
014D EE                MOV     A,R6
014E F0                MOVX    @DPTR,A
014F A3                INC     DPTR
0150 EF                MOV     A,R7
0151 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 775
0152 900000      R     MOV     DPTR,#c
0155 E0                MOVX    A,@DPTR
0156 2406              ADD     A,#06H
0158 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 776
0159         ?C0151:
                                           ; SOURCE LINE # 777
0159 900000      R     MOV     DPTR,#k_imu
015C E0                MOVX    A,@DPTR
015D FF                MOV     R7,A
015E 2400        E     ADD     A,#LOW IMU_connected
0160 F582              MOV     DPL,A
0162 E4                CLR     A
0163 3400        E     ADDC    A,#HIGH IMU_connected
0165 F583              MOV     DPH,A
0167 E0                MOVX    A,@DPTR
0168 75F005            MOV     B,#05H
016B A4                MUL     AB
016C 2400        E     ADD     A,#LOW IMU_conf+02H
016E F582              MOV     DPL,A
0170 E4                CLR     A
0171 3400        E     ADDC    A,#HIGH IMU_conf+02H
0173 F583              MOV     DPH,A
0175 E0                MOVX    A,@DPTR
0176 6078              JZ      ?C0152
                                           ; SOURCE LINE # 778
0178 900000      R     MOV     DPTR,#k_imu
017B E0                MOVX    A,@DPTR
017C FE                MOV     R6,A
017D 75F015            MOV     B,#015H
0180 A4                MUL     AB
0181 2400        E     ADD     A,#LOW g_imu+0DH
0183 F582              MOV     DPL,A
0185 E5F0              MOV     A,B
0187 3400        E     ADDC    A,#HIGH g_imu+0DH
0189 F583              MOV     DPH,A
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 76  

018B E0                MOVX    A,@DPTR
018C FC                MOV     R4,A
018D A3                INC     DPTR
018E E0                MOVX    A,@DPTR
018F FD                MOV     R5,A
0190 900000      R     MOV     DPTR,#c
0193 E0                MOVX    A,@DPTR
0194 FB                MOV     R3,A
0195 2400        R     ADD     A,#LOW single_packet
0197 F582              MOV     DPL,A
0199 E4                CLR     A
019A 3400        R     ADDC    A,#HIGH single_packet
019C F583              MOV     DPH,A
019E EC                MOV     A,R4
019F F0                MOVX    @DPTR,A
01A0 A3                INC     DPTR
01A1 ED                MOV     A,R5
01A2 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 779
01A3 75F015            MOV     B,#015H
01A6 EE                MOV     A,R6
01A7 A4                MUL     AB
01A8 2400        E     ADD     A,#LOW g_imu+0FH
01AA F582              MOV     DPL,A
01AC E5F0              MOV     A,B
01AE 3400        E     ADDC    A,#HIGH g_imu+0FH
01B0 F583              MOV     DPH,A
01B2 E0                MOVX    A,@DPTR
01B3 FC                MOV     R4,A
01B4 A3                INC     DPTR
01B5 E0                MOVX    A,@DPTR
01B6 FD                MOV     R5,A
01B7 7400        R     MOV     A,#LOW single_packet+02H
01B9 2B                ADD     A,R3
01BA F582              MOV     DPL,A
01BC E4                CLR     A
01BD 3400        R     ADDC    A,#HIGH single_packet+02H
01BF F583              MOV     DPH,A
01C1 EC                MOV     A,R4
01C2 F0                MOVX    @DPTR,A
01C3 A3                INC     DPTR
01C4 ED                MOV     A,R5
01C5 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 780
01C6 75F015            MOV     B,#015H
01C9 EF                MOV     A,R7
01CA A4                MUL     AB
01CB 2400        E     ADD     A,#LOW g_imu+011H
01CD F582              MOV     DPL,A
01CF E5F0              MOV     A,B
01D1 3400        E     ADDC    A,#HIGH g_imu+011H
01D3 F583              MOV     DPH,A
01D5 E0                MOVX    A,@DPTR
01D6 FE                MOV     R6,A
01D7 A3                INC     DPTR
01D8 E0                MOVX    A,@DPTR
01D9 FF                MOV     R7,A
01DA 7400        R     MOV     A,#LOW single_packet+04H
01DC 2B                ADD     A,R3
01DD F582              MOV     DPL,A
01DF E4                CLR     A
01E0 3400        R     ADDC    A,#HIGH single_packet+04H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 77  

01E2 F583              MOV     DPH,A
01E4 EE                MOV     A,R6
01E5 F0                MOVX    @DPTR,A
01E6 A3                INC     DPTR
01E7 EF                MOV     A,R7
01E8 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 781
01E9 900000      R     MOV     DPTR,#c
01EC E0                MOVX    A,@DPTR
01ED 2406              ADD     A,#06H
01EF F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 782
01F0         ?C0152:
                                           ; SOURCE LINE # 783
01F0 900000      R     MOV     DPTR,#k_imu
01F3 E0                MOVX    A,@DPTR
01F4 FF                MOV     R7,A
01F5 2400        E     ADD     A,#LOW IMU_connected
01F7 F582              MOV     DPL,A
01F9 E4                CLR     A
01FA 3400        E     ADDC    A,#HIGH IMU_connected
01FC F583              MOV     DPH,A
01FE E0                MOVX    A,@DPTR
01FF 75F005            MOV     B,#05H
0202 A4                MUL     AB
0203 2400        E     ADD     A,#LOW IMU_conf+04H
0205 F582              MOV     DPL,A
0207 E4                CLR     A
0208 3400        E     ADDC    A,#HIGH IMU_conf+04H
020A F583              MOV     DPH,A
020C E0                MOVX    A,@DPTR
020D 602D              JZ      ?C0153
                                           ; SOURCE LINE # 784
020F 75F015            MOV     B,#015H
0212 EF                MOV     A,R7
0213 A4                MUL     AB
0214 2400        E     ADD     A,#LOW g_imu+013H
0216 F582              MOV     DPL,A
0218 E5F0              MOV     A,B
021A 3400        E     ADDC    A,#HIGH g_imu+013H
021C F583              MOV     DPH,A
021E E0                MOVX    A,@DPTR
021F FE                MOV     R6,A
0220 A3                INC     DPTR
0221 E0                MOVX    A,@DPTR
0222 FF                MOV     R7,A
0223 900000      R     MOV     DPTR,#c
0226 E0                MOVX    A,@DPTR
0227 2400        R     ADD     A,#LOW single_packet
0229 F582              MOV     DPL,A
022B E4                CLR     A
022C 3400        R     ADDC    A,#HIGH single_packet
022E F583              MOV     DPH,A
0230 EE                MOV     A,R6
0231 F0                MOVX    @DPTR,A
0232 A3                INC     DPTR
0233 EF                MOV     A,R7
0234 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 785
0235 900000      R     MOV     DPTR,#c
0238 E0                MOVX    A,@DPTR
0239 2402              ADD     A,#02H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 78  

023B F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 786
023C         ?C0153:
                                           ; SOURCE LINE # 787
023C 900000      R     MOV     DPTR,#k_imu
023F E0                MOVX    A,@DPTR
0240 2400        E     ADD     A,#LOW IMU_connected
0242 F582              MOV     DPL,A
0244 E4                CLR     A
0245 3400        E     ADDC    A,#HIGH IMU_connected
0247 F583              MOV     DPH,A
0249 E0                MOVX    A,@DPTR
024A 25E0              ADD     A,ACC
024C 2400        E     ADD     A,#LOW single_imu_size
024E F582              MOV     DPL,A
0250 E4                CLR     A
0251 3400        E     ADDC    A,#HIGH single_imu_size
0253 F583              MOV     DPH,A
0255 E0                MOVX    A,@DPTR
0256 FE                MOV     R6,A
0257 A3                INC     DPTR
0258 E0                MOVX    A,@DPTR
0259 2400        R     ADD     A,#LOW single_packet+0FFFFH
025B F582              MOV     DPL,A
025D 7400        R     MOV     A,#HIGH single_packet+0FFFFH
025F 3E                ADDC    A,R6
0260 F583              MOV     DPH,A
0262 743A              MOV     A,#03AH
0264 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 788
0265 900000      R     MOV     DPTR,#c
0268 7401              MOV     A,#01H
026A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 790
026B E4                CLR     A
026C A3                INC     DPTR
026D F0                MOVX    @DPTR,A
026E         ?C0154:
026E 900000      R     MOV     DPTR,#k_imu
0271 E0                MOVX    A,@DPTR
0272 2400        E     ADD     A,#LOW IMU_connected
0274 F582              MOV     DPL,A
0276 E4                CLR     A
0277 3400        E     ADDC    A,#HIGH IMU_connected
0279 F583              MOV     DPH,A
027B E0                MOVX    A,@DPTR
027C F9                MOV     R1,A
027D 25E0              ADD     A,ACC
027F 2400        E     ADD     A,#LOW single_imu_size
0281 F582              MOV     DPL,A
0283 E4                CLR     A
0284 3400        E     ADDC    A,#HIGH single_imu_size
0286 F583              MOV     DPH,A
0288 E0                MOVX    A,@DPTR
0289 FE                MOV     R6,A
028A A3                INC     DPTR
028B E0                MOVX    A,@DPTR
028C FF                MOV     R7,A
028D 900000      R     MOV     DPTR,#k
0290 E0                MOVX    A,@DPTR
0291 FD                MOV     R5,A
0292 D3                SETB    C
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 79  

0293 EF                MOV     A,R7
0294 9D                SUBB    A,R5
0295 7480              MOV     A,#080H
0297 F8                MOV     R0,A
0298 EE                MOV     A,R6
0299 6480              XRL     A,#080H
029B 98                SUBB    A,R0
029C 402B              JC      ?C0155
                                           ; SOURCE LINE # 791
029E E0                MOVX    A,@DPTR
029F FF                MOV     R7,A
02A0 2400        R     ADD     A,#LOW single_packet
02A2 F582              MOV     DPL,A
02A4 E4                CLR     A
02A5 3400        R     ADDC    A,#HIGH single_packet
02A7 F583              MOV     DPH,A
02A9 E0                MOVX    A,@DPTR
02AA FE                MOV     R6,A
02AB EF                MOV     A,R7
02AC 900000      R     MOV     DPTR,#gl_c
02AF E0                MOVX    A,@DPTR
02B0 2D                ADD     A,R5
02B1 FD                MOV     R5,A
02B2 E4                CLR     A
02B3 33                RLC     A
02B4 FC                MOV     R4,A
02B5 7400        R     MOV     A,#LOW packet_data
02B7 2D                ADD     A,R5
02B8 F582              MOV     DPL,A
02BA 7400        R     MOV     A,#HIGH packet_data
02BC 3C                ADDC    A,R4
02BD F583              MOV     DPH,A
02BF EE                MOV     A,R6
02C0 F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 792
02C1 900000      R     MOV     DPTR,#k
02C4 E0                MOVX    A,@DPTR
02C5 04                INC     A
02C6 F0                MOVX    @DPTR,A
02C7 80A5              SJMP    ?C0154
02C9         ?C0155:
                                           ; SOURCE LINE # 793
02C9 E9                MOV     A,R1
02CA 25E0              ADD     A,ACC
02CC 2400        E     ADD     A,#LOW single_imu_size
02CE F582              MOV     DPL,A
02D0 E4                CLR     A
02D1 3400        E     ADDC    A,#HIGH single_imu_size
02D3 F583              MOV     DPH,A
02D5 E0                MOVX    A,@DPTR
02D6 A3                INC     DPTR
02D7 E0                MOVX    A,@DPTR
02D8 FF                MOV     R7,A
02D9 900000      R     MOV     DPTR,#gl_c
02DC E0                MOVX    A,@DPTR
02DD 2F                ADD     A,R7
02DE F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 795
02DF 7E00              MOV     R6,#00H
02E1 7F16              MOV     R7,#016H
02E3 7D00              MOV     R5,#00H
02E5 7B01              MOV     R3,#01H
C51 COMPILER V9.51   COMMAND_PROCESSING                                                    11/16/2017 15:16:18 PAGE 80  

02E7 7A00        R     MOV     R2,#HIGH single_packet
02E9 7900        R     MOV     R1,#LOW single_packet
02EB 120000      E     LCALL   ?C?MEMSET
                                           ; SOURCE LINE # 797
02EE 900000      R     MOV     DPTR,#k_imu
02F1 E0                MOVX    A,@DPTR
02F2 04                INC     A
02F3 F0                MOVX    @DPTR,A
02F4 020000      R     LJMP    ?C0147
02F7         ?C0148:
                                           ; SOURCE LINE # 800
02F7 7B01              MOV     R3,#01H
02F9 7A00        R     MOV     R2,#HIGH packet_data
02FB 7900        R     MOV     R1,#LOW packet_data
02FD 900000      E     MOV     DPTR,#imus_data_size
0300 E0                MOVX    A,@DPTR
0301 A3                INC     DPTR
0302 E0                MOVX    A,@DPTR
0303 14                DEC     A
0304 FD                MOV     R5,A
0305 120000      R     LCALL   _LCRChecksum
0308 900000      E     MOV     DPTR,#imus_data_size
030B E0                MOVX    A,@DPTR
030C FC                MOV     R4,A
030D A3                INC     DPTR
030E E0                MOVX    A,@DPTR
030F FD                MOV     R5,A
0310 2400        R     ADD     A,#LOW packet_data+0FFFFH
0312 F582              MOV     DPL,A
0314 7400        R     MOV     A,#HIGH packet_data+0FFFFH
0316 3C                ADDC    A,R4
0317 F583              MOV     DPH,A
0319 EF                MOV     A,R7
031A F0                MOVX    @DPTR,A
                                           ; SOURCE LINE # 801
031B 7B01              MOV     R3,#01H
031D 7A00        R     MOV     R2,#HIGH packet_data
031F 7900        R     MOV     R1,#LOW packet_data
0321 120000      R     LCALL   _commWrite
                                           ; SOURCE LINE # 804
0324 22                RET     
             ; FUNCTION cmd_get_imu_readings (END)



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =   5706    ----
   CONSTANT SIZE    =   1516    ----
   XDATA SIZE       =   1102    2779
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      14
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
